<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R for Data Science Solutions</title>
  <meta name="description" content="This contains the solutions to the exercises in the book, R for Data Science, by Garrett Grolemund and Hadley Wickham.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R for Data Science Solutions" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://jrnold.github.io/r4ds-exercise-solutions" />
  
  <meta property="og:description" content="This contains the solutions to the exercises in the book, R for Data Science, by Garrett Grolemund and Hadley Wickham." />
  <meta name="github-repo" content="jrnold/r4ds-exercise-solutions" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R for Data Science Solutions" />
  <meta name="twitter:site" content="@jrnld" />
  <meta name="twitter:description" content="This contains the solutions to the exercises in the book, R for Data Science, by Garrett Grolemund and Hadley Wickham." />
  

<meta name="author" content="Jeffrey B. Arnold">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="data-import.html">
<link rel="next" href="relational-data.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="r4ds.css" type="text/css" />
<link rel="stylesheet" href="r4ds-solutions.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">R for Data Science Solutions</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#organization"><i class="fa fa-check"></i>Organization</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#dependencies"><i class="fa fa-check"></i>Dependencies</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#bugscontributing"><i class="fa fa-check"></i>Bugs/Contributing</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#updates"><i class="fa fa-check"></i>Updates</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section"><i class="fa fa-check"></i>2018-08-06</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-1"><i class="fa fa-check"></i>2018-08-05</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-2"><i class="fa fa-check"></i>2018-08-04</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-3"><i class="fa fa-check"></i>2018-08-03</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-4"><i class="fa fa-check"></i>2018-08-01</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-5"><i class="fa fa-check"></i>2018-07-31</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-6"><i class="fa fa-check"></i>2018-07-30</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-7"><i class="fa fa-check"></i>2018-07-29</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-8"><i class="fa fa-check"></i>2018-07-28</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-9"><i class="fa fa-check"></i>2018-07-24</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-10"><i class="fa fa-check"></i>2018-07-23</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-11"><i class="fa fa-check"></i>2018-07-22</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-12"><i class="fa fa-check"></i>2018-07-21</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-13"><i class="fa fa-check"></i>2018-07-15</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-14"><i class="fa fa-check"></i>2018-07-14</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#section-15"><i class="fa fa-check"></i>2018-05-08</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#colophon"><i class="fa fa-check"></i>Colophon</a></li>
</ul></li>
<li class="part"><span><b>I Explore</b></span></li>
<li class="chapter" data-level="2" data-path="explore-intro.html"><a href="explore-intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="data-visualisation.html"><a href="data-visualisation.html"><i class="fa fa-check"></i><b>3</b> Data Visualisation</a><ul>
<li class="chapter" data-level="3.1" data-path="data-visualisation.html"><a href="data-visualisation.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="data-visualisation.html"><a href="data-visualisation.html#first-steps"><i class="fa fa-check"></i><b>3.2</b> First Steps</a><ul>
<li><a href="data-visualisation.html#exercise-3.2.1.">Exercise <span class="exercise-number">3.2.1</span>.</a></li>
<li><a href="data-visualisation.html#exercise-3.2.2.">Exercise <span class="exercise-number">3.2.2</span>.</a></li>
<li><a href="data-visualisation.html#exercise-3.2.3.">Exercise <span class="exercise-number">3.2.3</span>.</a></li>
<li><a href="data-visualisation.html#exercise-3.2.4.">Exercise <span class="exercise-number">3.2.4</span>.</a></li>
<li><a href="data-visualisation.html#exercise-3.2.5.">Exercise <span class="exercise-number">3.2.5</span>.</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-visualisation.html"><a href="data-visualisation.html#aesthetic-mappings"><i class="fa fa-check"></i><b>3.3</b> Aesthetic mappings</a><ul>
<li><a href="data-visualisation.html#exercise-3.3.1">Exercise <span class="exercise-number">3.3.1</span></a></li>
<li><a href="data-visualisation.html#exercise-3.3.2">Exercise <span class="exercise-number">3.3.2</span></a></li>
<li><a href="data-visualisation.html#exercise-3.3.3">Exercise <span class="exercise-number">3.3.3</span></a></li>
<li><a href="data-visualisation.html#exercise-3.3.4">Exercise <span class="exercise-number">3.3.4</span></a></li>
<li><a href="data-visualisation.html#exercise-3.3.5">Exercise <span class="exercise-number">3.3.5</span></a></li>
<li><a href="data-visualisation.html#exercise-3.3.6.">Exercise <span class="exercise-number">3.3.6</span>.</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-visualisation.html"><a href="data-visualisation.html#common-problems"><i class="fa fa-check"></i><b>3.4</b> Common problems</a></li>
<li class="chapter" data-level="3.5" data-path="data-visualisation.html"><a href="data-visualisation.html#facets"><i class="fa fa-check"></i><b>3.5</b> Facets</a><ul>
<li><a href="data-visualisation.html#exercise-3.5.1">Exercise <span class="exercise-number">3.5.1</span></a></li>
<li><a href="data-visualisation.html#exercise-3.5.2">Exercise <span class="exercise-number">3.5.2</span></a></li>
<li><a href="data-visualisation.html#exercise-3.5.3">Exercise <span class="exercise-number">3.5.3</span></a></li>
<li><a href="data-visualisation.html#exercise-3.5.4">Exercise <span class="exercise-number">3.5.4</span></a></li>
<li><a href="data-visualisation.html#exercise-3.5.5">Exercise <span class="exercise-number">3.5.5</span></a></li>
<li><a href="data-visualisation.html#exercise-3.5.6">Exercise <span class="exercise-number">3.5.6</span></a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="data-visualisation.html"><a href="data-visualisation.html#geometric-objects"><i class="fa fa-check"></i><b>3.6</b> Geometric Objects</a><ul>
<li><a href="data-visualisation.html#exercise-3.6.1">Exercise <span class="exercise-number">3.6.1</span></a></li>
<li><a href="data-visualisation.html#exercise-3.6.2">Exercise <span class="exercise-number">3.6.2</span></a></li>
<li><a href="data-visualisation.html#exercise-3.6.3">Exercise <span class="exercise-number">3.6.3</span></a></li>
<li><a href="data-visualisation.html#exercise-3.6.4">Exercise <span class="exercise-number">3.6.4</span></a></li>
<li><a href="data-visualisation.html#exercise-3.6.5">Exercise <span class="exercise-number">3.6.5</span></a></li>
<li><a href="data-visualisation.html#exercise-3.6.6">Exercise <span class="exercise-number">3.6.6</span></a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="data-visualisation.html"><a href="data-visualisation.html#statistical-transformations"><i class="fa fa-check"></i><b>3.7</b> Statistical Transformations</a><ul>
<li><a href="data-visualisation.html#exercise-3.7.1">Exercise <span class="exercise-number">3.7.1</span></a></li>
<li><a href="data-visualisation.html#exercise-3.7.2.">Exercise <span class="exercise-number">3.7.2</span>.</a></li>
<li><a href="data-visualisation.html#exercise-3.7.3.">Exercise <span class="exercise-number">3.7.3</span>.</a></li>
<li><a href="data-visualisation.html#exercise-3.7.4.">Exercise <span class="exercise-number">3.7.4</span>.</a></li>
<li><a href="data-visualisation.html#exercise-3.7.5.">Exercise <span class="exercise-number">3.7.5</span>.</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="data-visualisation.html"><a href="data-visualisation.html#position-adjustments"><i class="fa fa-check"></i><b>3.8</b> Position Adjustments</a><ul>
<li><a href="data-visualisation.html#exercise-3.8.1.">Exercise <span class="exercise-number">3.8.1</span>.</a></li>
<li><a href="data-visualisation.html#exercise-3.8.2.">Exercise <span class="exercise-number">3.8.2</span>.</a></li>
<li><a href="data-visualisation.html#exercise-3.8.3.">Exercise <span class="exercise-number">3.8.3</span>.</a></li>
<li><a href="data-visualisation.html#exercise-3.8.4.">Exercise <span class="exercise-number">3.8.4</span>.</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="data-visualisation.html"><a href="data-visualisation.html#coordinate-systems"><i class="fa fa-check"></i><b>3.9</b> Coordinate Systems</a><ul>
<li><a href="data-visualisation.html#exercise-3.9.1">Exercise <span class="exercise-number">3.9.1</span></a></li>
<li><a href="data-visualisation.html#exercise-3.9.2">Exercise <span class="exercise-number">3.9.2</span></a></li>
<li><a href="data-visualisation.html#exercise-3.9.3">Exercise <span class="exercise-number">3.9.3</span></a></li>
<li><a href="data-visualisation.html#exercise-3.9.4">Exercise <span class="exercise-number">3.9.4</span></a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="data-visualisation.html"><a href="data-visualisation.html#the-layered-grammar-of-graphics"><i class="fa fa-check"></i><b>3.10</b> The Layered Grammar of Graphics</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="workflow-basics.html"><a href="workflow-basics.html"><i class="fa fa-check"></i><b>4</b> Workflow: basics</a><ul>
<li class="chapter" data-level="" data-path="workflow-basics.html"><a href="workflow-basics.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="4.1" data-path="workflow-basics.html"><a href="workflow-basics.html#coding-basics"><i class="fa fa-check"></i><b>4.1</b> Coding basics</a></li>
<li class="chapter" data-level="4.2" data-path="workflow-basics.html"><a href="workflow-basics.html#whats-in-a-name"><i class="fa fa-check"></i><b>4.2</b> What’s in a name?</a></li>
<li class="chapter" data-level="4.3" data-path="workflow-basics.html"><a href="workflow-basics.html#calling-functions"><i class="fa fa-check"></i><b>4.3</b> Calling functions</a></li>
<li class="chapter" data-level="4.4" data-path="workflow-basics.html"><a href="workflow-basics.html#practice"><i class="fa fa-check"></i><b>4.4</b> Practice</a><ul>
<li><a href="workflow-basics.html#exercise-4.4.1">Exercise <span class="exercise-number">4.4.1</span></a></li>
<li><a href="workflow-basics.html#exercise-4.4.2">Exercise <span class="exercise-number">4.4.2</span></a></li>
<li><a href="workflow-basics.html#exercise-4.4.3">Exercise <span class="exercise-number">4.4.3</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>5</b> Data transformation</a><ul>
<li class="chapter" data-level="5.1" data-path="data-transformation.html"><a href="data-transformation.html#introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="data-transformation.html"><a href="data-transformation.html#filter-rows-with-filter"><i class="fa fa-check"></i><b>5.2</b> Filter rows with <code>filter()</code></a><ul>
<li><a href="data-transformation.html#exercise-5.2.1">Exercise <span class="exercise-number">5.2.1</span></a></li>
<li><a href="data-transformation.html#exercise-5.2.2">Exercise <span class="exercise-number">5.2.2</span></a></li>
<li><a href="data-transformation.html#exercise-5.2.3">Exercise <span class="exercise-number">5.2.3</span></a></li>
<li><a href="data-transformation.html#exercise-5.2.4">Exercise <span class="exercise-number">5.2.4</span></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="data-transformation.html"><a href="data-transformation.html#arrange-rows-with-arrange"><i class="fa fa-check"></i><b>5.3</b> Arrange rows with <code>arrange()</code></a><ul>
<li><a href="data-transformation.html#exercise-5.3.1">Exercise <span class="exercise-number">5.3.1</span></a></li>
<li><a href="data-transformation.html#exercise-5.3.2">Exercise <span class="exercise-number">5.3.2</span></a></li>
<li><a href="data-transformation.html#exercise-5.3.3">Exercise <span class="exercise-number">5.3.3</span></a></li>
<li><a href="data-transformation.html#exercise-5.3.4">Exercise <span class="exercise-number">5.3.4</span></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data-transformation.html"><a href="data-transformation.html#select-columns-with-select"><i class="fa fa-check"></i><b>5.4</b> Select columns with <code>select()</code></a><ul>
<li><a href="data-transformation.html#exercise-5.4.1">Exercise <span class="exercise-number">5.4.1</span></a></li>
<li><a href="data-transformation.html#exercise-5.4.2">Exercise <span class="exercise-number">5.4.2</span></a></li>
<li><a href="data-transformation.html#exercise-5.4.3">Exercise <span class="exercise-number">5.4.3</span></a></li>
<li><a href="data-transformation.html#exercise-5.4.4">Exercise <span class="exercise-number">5.4.4</span></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="data-transformation.html"><a href="data-transformation.html#add-new-variables-with-mutate"><i class="fa fa-check"></i><b>5.5</b> Add new variables with <code>mutate()</code></a><ul>
<li><a href="data-transformation.html#exercise-5.5.1">Exercise <span class="exercise-number">5.5.1</span></a></li>
<li><a href="data-transformation.html#exercise-5.5.2">Exercise <span class="exercise-number">5.5.2</span></a></li>
<li><a href="data-transformation.html#exercise-5.5.3">Exercise <span class="exercise-number">5.5.3</span></a></li>
<li><a href="data-transformation.html#exercise-5.5.4">Exercise <span class="exercise-number">5.5.4</span></a></li>
<li><a href="data-transformation.html#exercise-5.5.5">Exercise <span class="exercise-number">5.5.5</span></a></li>
<li><a href="data-transformation.html#exercise-5.5.6">Exercise <span class="exercise-number">5.5.6</span></a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="data-transformation.html"><a href="data-transformation.html#grouped-summaries-with-summarise"><i class="fa fa-check"></i><b>5.6</b> Grouped summaries with <code>summarise()</code></a><ul>
<li><a href="data-transformation.html#exercise-5.6.1">Exercise <span class="exercise-number">5.6.1</span></a></li>
<li><a href="data-transformation.html#exercise-5.6.2">Exercise <span class="exercise-number">5.6.2</span></a></li>
<li><a href="data-transformation.html#exercise-5.6.3">Exercise <span class="exercise-number">5.6.3</span></a></li>
<li><a href="data-transformation.html#exercise-5.6.4">Exercise <span class="exercise-number">5.6.4</span></a></li>
<li><a href="data-transformation.html#exercise-5.6.5">Exercise <span class="exercise-number">5.6.5</span></a></li>
<li><a href="data-transformation.html#exercise-5.6.6">Exercise <span class="exercise-number">5.6.6</span></a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="data-transformation.html"><a href="data-transformation.html#grouped-mutates-and-filters"><i class="fa fa-check"></i><b>5.7</b> Grouped mutates (and filters)</a><ul>
<li><a href="data-transformation.html#exercise-5.7.1">Exercise <span class="exercise-number">5.7.1</span></a></li>
<li><a href="data-transformation.html#exercise-5.7.2">Exercise <span class="exercise-number">5.7.2</span></a></li>
<li><a href="data-transformation.html#exercise-5.7.3">Exercise <span class="exercise-number">5.7.3</span></a></li>
<li><a href="data-transformation.html#exercise-5.7.4">Exercise <span class="exercise-number">5.7.4</span></a></li>
<li><a href="data-transformation.html#exercise-5.7.5">Exercise <span class="exercise-number">5.7.5</span></a></li>
<li><a href="data-transformation.html#exercise-5.7.6">Exercise <span class="exercise-number">5.7.6</span></a></li>
<li><a href="data-transformation.html#exercise-5.7.7">Exercise <span class="exercise-number">5.7.7</span></a></li>
<li><a href="data-transformation.html#exercise-5.7.8">Exercise <span class="exercise-number">5.7.8</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="workflow-scripts.html"><a href="workflow-scripts.html"><i class="fa fa-check"></i><b>6</b> Workflow: scripts</a><ul>
<li class="chapter" data-level="6.1" data-path="workflow-scripts.html"><a href="workflow-scripts.html#running-code"><i class="fa fa-check"></i><b>6.1</b> Running code</a></li>
<li class="chapter" data-level="6.2" data-path="workflow-scripts.html"><a href="workflow-scripts.html#rstudio-diagnostics"><i class="fa fa-check"></i><b>6.2</b> RStudio diagnostics</a></li>
<li class="chapter" data-level="6.3" data-path="workflow-scripts.html"><a href="workflow-scripts.html#practice-1"><i class="fa fa-check"></i><b>6.3</b> Practice</a><ul>
<li><a href="workflow-scripts.html#exercise-6.3.1">Exercise <span class="exercise-number">6.3.1</span></a></li>
<li><a href="workflow-scripts.html#exercise-6.3.2">Exercise <span class="exercise-number">6.3.2</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>7</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="7.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#introduction-3"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#questions"><i class="fa fa-check"></i><b>7.2</b> Questions</a></li>
<li class="chapter" data-level="7.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#variation"><i class="fa fa-check"></i><b>7.3</b> Variation</a><ul>
<li><a href="exploratory-data-analysis.html#exercise-7.3.1">Exercise <span class="exercise-number">7.3.1</span></a></li>
<li><a href="exploratory-data-analysis.html#exercise-7.3.2">Exercise <span class="exercise-number">7.3.2</span></a></li>
<li><a href="exploratory-data-analysis.html#exercise-7.3.3">Exercise <span class="exercise-number">7.3.3</span></a></li>
<li><a href="exploratory-data-analysis.html#exercise-7.3.4">Exercise <span class="exercise-number">7.3.4</span></a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#missing-values"><i class="fa fa-check"></i><b>7.4</b> Missing Values</a><ul>
<li><a href="exploratory-data-analysis.html#exercise-7.4.1">Exercise <span class="exercise-number">7.4.1</span></a></li>
<li><a href="exploratory-data-analysis.html#exercise-7.4.2">Exercise <span class="exercise-number">7.4.2</span></a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#covariation"><i class="fa fa-check"></i><b>7.5</b> Covariation</a><ul>
<li class="chapter" data-level="7.5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#a-categorical-and-continuous-variable"><i class="fa fa-check"></i><b>7.5.1</b> A categorical and continuous variable</a></li>
<li class="chapter" data-level="7.5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#two-categorical-variables"><i class="fa fa-check"></i><b>7.5.2</b> Two categorical variables</a></li>
<li class="chapter" data-level="7.5.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#two-continuous-variables"><i class="fa fa-check"></i><b>7.5.3</b> Two continuous variables</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#patterns-and-models"><i class="fa fa-check"></i><b>7.6</b> Patterns and models</a></li>
<li class="chapter" data-level="7.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#ggplot2-calls"><i class="fa fa-check"></i><b>7.7</b> ggplot2 calls</a></li>
<li class="chapter" data-level="7.8" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#learning-more"><i class="fa fa-check"></i><b>7.8</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="workflow-projects.html"><a href="workflow-projects.html"><i class="fa fa-check"></i><b>8</b> Workflow: projects</a></li>
<li class="part"><span><b>II Wrangle</b></span></li>
<li class="chapter" data-level="9" data-path="introduction-4.html"><a href="introduction-4.html"><i class="fa fa-check"></i><b>9</b> Introduction</a></li>
<li class="chapter" data-level="10" data-path="tibbles.html"><a href="tibbles.html"><i class="fa fa-check"></i><b>10</b> Tibbles</a><ul>
<li class="chapter" data-level="10.1" data-path="tibbles.html"><a href="tibbles.html#introduction-5"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="tibbles.html"><a href="tibbles.html#creating-tibbles"><i class="fa fa-check"></i><b>10.2</b> Creating Tibbles</a></li>
<li class="chapter" data-level="10.3" data-path="tibbles.html"><a href="tibbles.html#tibbles-vs.data.frame"><i class="fa fa-check"></i><b>10.3</b> Tibbles vs. data.frame</a></li>
<li class="chapter" data-level="10.4" data-path="tibbles.html"><a href="tibbles.html#subsetting"><i class="fa fa-check"></i><b>10.4</b> Subsetting</a></li>
<li class="chapter" data-level="10.5" data-path="tibbles.html"><a href="tibbles.html#interacting-with-older-code"><i class="fa fa-check"></i><b>10.5</b> Interacting with older code</a></li>
<li class="chapter" data-level="10.6" data-path="tibbles.html"><a href="tibbles.html#exercises"><i class="fa fa-check"></i><b>10.6</b> Exercises</a><ul>
<li><a href="tibbles.html#exercise-10.6.1">Exercise <span class="exercise-number">10.6.1</span></a></li>
<li><a href="tibbles.html#exercise-10.6.2">Exercise <span class="exercise-number">10.6.2</span></a></li>
<li><a href="tibbles.html#exercise-10.6.3">Exercise <span class="exercise-number">10.6.3</span></a></li>
<li><a href="tibbles.html#exercise-10.6.4">Exercise <span class="exercise-number">10.6.4</span></a></li>
<li><a href="tibbles.html#exercise-10.6.5">Exercise <span class="exercise-number">10.6.5</span></a></li>
<li><a href="tibbles.html#exercise-10.6.6">Exercise <span class="exercise-number">10.6.6</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="data-import.html"><a href="data-import.html"><i class="fa fa-check"></i><b>11</b> Data import</a><ul>
<li class="chapter" data-level="11.1" data-path="data-import.html"><a href="data-import.html#introduction-6"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="data-import.html"><a href="data-import.html#getting-started"><i class="fa fa-check"></i><b>11.2</b> Getting started</a><ul>
<li><a href="data-import.html#exercise-11.2.1">Exercise <span class="exercise-number">11.2.1</span></a></li>
<li><a href="data-import.html#exercise-11.2.2">Exercise <span class="exercise-number">11.2.2</span></a></li>
<li><a href="data-import.html#exercise-11.2.3">Exercise <span class="exercise-number">11.2.3</span></a></li>
<li><a href="data-import.html#exercise-11.2.4">Exercise <span class="exercise-number">11.2.4</span></a></li>
<li><a href="data-import.html#exercise-11.2.5">Exercise <span class="exercise-number">11.2.5</span></a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="data-import.html"><a href="data-import.html#parsing-a-vector"><i class="fa fa-check"></i><b>11.3</b> Parsing a vector</a><ul>
<li><a href="data-import.html#exercise-11.3.1">Exercise <span class="exercise-number">11.3.1</span></a></li>
<li><a href="data-import.html#exercise-11.3.2">Exercise <span class="exercise-number">11.3.2</span></a></li>
<li><a href="data-import.html#exercise-11.3.3">Exercise <span class="exercise-number">11.3.3</span></a></li>
<li><a href="data-import.html#exercise-11.3.4">Exercise <span class="exercise-number">11.3.4</span></a></li>
<li><a href="data-import.html#exercise-11.3.5">Exercise <span class="exercise-number">11.3.5</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>12</b> Tidy Data</a><ul>
<li class="chapter" data-level="12.1" data-path="tidy-data.html"><a href="tidy-data.html#introduction-7"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="tidy-data.html"><a href="tidy-data.html#tidy-data-1"><i class="fa fa-check"></i><b>12.2</b> Tidy data</a><ul>
<li><a href="tidy-data.html#exercise-12.2.1">Exercise <span class="exercise-number">12.2.1</span></a></li>
<li><a href="tidy-data.html#exercise-12.2.2">Exercise <span class="exercise-number">12.2.2</span></a></li>
<li><a href="tidy-data.html#exercise-12.2.3">Exercise <span class="exercise-number">12.2.3</span></a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="tidy-data.html"><a href="tidy-data.html#spreading-and-gathering"><i class="fa fa-check"></i><b>12.3</b> Spreading and Gathering</a><ul>
<li><a href="tidy-data.html#exercise-12.3.1">Exercise <span class="exercise-number">12.3.1</span></a></li>
<li><a href="tidy-data.html#exercise-12.3.2">Exercise <span class="exercise-number">12.3.2</span></a></li>
<li><a href="tidy-data.html#exercise-12.3.3">Exercise <span class="exercise-number">12.3.3</span></a></li>
<li><a href="tidy-data.html#exercise-12.3.4">Exercise <span class="exercise-number">12.3.4</span></a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="tidy-data.html"><a href="tidy-data.html#separating-and-uniting"><i class="fa fa-check"></i><b>12.4</b> Separating and Uniting</a><ul>
<li><a href="tidy-data.html#exercise-12.4.1">Exercise <span class="exercise-number">12.4.1</span></a></li>
<li><a href="tidy-data.html#exercise-12.4.2">Exercise <span class="exercise-number">12.4.2</span></a></li>
<li><a href="tidy-data.html#exercise-12.4.3">Exercise <span class="exercise-number">12.4.3</span></a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="tidy-data.html"><a href="tidy-data.html#missing-values-1"><i class="fa fa-check"></i><b>12.5</b> Missing Values</a><ul>
<li><a href="tidy-data.html#exercise-12.5.1">Exercise <span class="exercise-number">12.5.1</span></a></li>
<li><a href="tidy-data.html#exercise-12.5.2">Exercise <span class="exercise-number">12.5.2</span></a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="tidy-data.html"><a href="tidy-data.html#case-study"><i class="fa fa-check"></i><b>12.6</b> Case Study</a><ul>
<li><a href="tidy-data.html#exercise-12.6.1">Exercise <span class="exercise-number">12.6.1</span></a></li>
<li><a href="tidy-data.html#exercise-12.6.2">Exercise <span class="exercise-number">12.6.2</span></a></li>
<li><a href="tidy-data.html#exercise-12.6.3">Exercise <span class="exercise-number">12.6.3</span></a></li>
<li><a href="tidy-data.html#exercise-12.6.4">Exercise <span class="exercise-number">12.6.4</span></a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="tidy-data.html"><a href="tidy-data.html#non-tidy-data"><i class="fa fa-check"></i><b>12.7</b> Non-Tidy Data</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>13</b> Relational data</a><ul>
<li class="chapter" data-level="13.1" data-path="relational-data.html"><a href="relational-data.html#introduction-8"><i class="fa fa-check"></i><b>13.1</b> Introduction</a><ul>
<li><a href="relational-data.html#exercise-13.1.1">Exercise <span class="exercise-number">13.1.1</span></a></li>
<li><a href="relational-data.html#exercise-13.1.2">Exercise <span class="exercise-number">13.1.2</span></a></li>
<li><a href="relational-data.html#exercise-13.1.3">Exercise <span class="exercise-number">13.1.3</span></a></li>
<li><a href="relational-data.html#exercise-13.1.4">Exercise <span class="exercise-number">13.1.4</span></a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="relational-data.html"><a href="relational-data.html#keys"><i class="fa fa-check"></i><b>13.2</b> Keys</a><ul>
<li><a href="relational-data.html#exercise-13.2.1">Exercise <span class="exercise-number">13.2.1</span></a></li>
<li><a href="relational-data.html#exercise-13.2.2">Exercise <span class="exercise-number">13.2.2</span></a></li>
<li><a href="relational-data.html#exercise-13.2.3">Exercise <span class="exercise-number">13.2.3</span></a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="relational-data.html"><a href="relational-data.html#mutating-joins"><i class="fa fa-check"></i><b>13.3</b> Mutating Joins</a><ul>
<li><a href="relational-data.html#exercise-13.3.1">Exercise <span class="exercise-number">13.3.1</span></a></li>
<li><a href="relational-data.html#exercise-13.3.2">Exercise <span class="exercise-number">13.3.2</span></a></li>
<li><a href="relational-data.html#exercise-13.3.3">Exercise <span class="exercise-number">13.3.3</span></a></li>
<li><a href="relational-data.html#exercise-13.3.4">Exercise <span class="exercise-number">13.3.4</span></a></li>
<li><a href="relational-data.html#exercise-13.3.5">Exercise <span class="exercise-number">13.3.5</span></a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="relational-data.html"><a href="relational-data.html#filtering-joins"><i class="fa fa-check"></i><b>13.4</b> Filtering Joins</a><ul>
<li><a href="relational-data.html#exercise-13.4.1">Exercise <span class="exercise-number">13.4.1</span></a></li>
<li><a href="relational-data.html#exercise-13.4.2">Exercise <span class="exercise-number">13.4.2</span></a></li>
<li><a href="relational-data.html#exercise-13.4.3">Exercise <span class="exercise-number">13.4.3</span></a></li>
<li><a href="relational-data.html#exercise-13.4.4">Exercise <span class="exercise-number">13.4.4</span></a></li>
<li><a href="relational-data.html#exercise-13.4.5">Exercise <span class="exercise-number">13.4.5</span></a></li>
<li><a href="relational-data.html#exercise-13.4.6">Exercise <span class="exercise-number">13.4.6</span></a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="relational-data.html"><a href="relational-data.html#join-problems"><i class="fa fa-check"></i><b>13.5</b> Join problems</a></li>
<li class="chapter" data-level="13.6" data-path="relational-data.html"><a href="relational-data.html#set-operations"><i class="fa fa-check"></i><b>13.6</b> Set operations</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>14</b> Strings</a><ul>
<li class="chapter" data-level="14.1" data-path="strings.html"><a href="strings.html#introduction-9"><i class="fa fa-check"></i><b>14.1</b> Introduction</a></li>
<li class="chapter" data-level="14.2" data-path="strings.html"><a href="strings.html#string-basics"><i class="fa fa-check"></i><b>14.2</b> String Basics</a><ul>
<li><a href="strings.html#exercise-14.2.1">Exercise <span class="exercise-number">14.2.1</span></a></li>
<li><a href="strings.html#exercise-14.2.2">Exercise <span class="exercise-number">14.2.2</span></a></li>
<li><a href="strings.html#exercise-14.2.3">Exercise <span class="exercise-number">14.2.3</span></a></li>
<li><a href="strings.html#exercise-14.2.4">Exercise <span class="exercise-number">14.2.4</span></a></li>
<li><a href="strings.html#exercise-14.2.5">Exercise <span class="exercise-number">14.2.5</span></a></li>
<li><a href="strings.html#exercise-14.2.6">Exercise <span class="exercise-number">14.2.6</span></a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="strings.html"><a href="strings.html#matching-patterns-and-regular-expressions"><i class="fa fa-check"></i><b>14.3</b> Matching Patterns and Regular Expressions</a><ul>
<li class="chapter" data-level="14.3.1" data-path="strings.html"><a href="strings.html#basic-matches"><i class="fa fa-check"></i><b>14.3.1</b> Basic Matches</a></li>
<li class="chapter" data-level="14.3.2" data-path="strings.html"><a href="strings.html#anchors"><i class="fa fa-check"></i><b>14.3.2</b> Anchors</a></li>
<li class="chapter" data-level="14.3.3" data-path="strings.html"><a href="strings.html#character-classes-and-alternatives"><i class="fa fa-check"></i><b>14.3.3</b> Character classes and alternatives</a></li>
<li class="chapter" data-level="14.3.4" data-path="strings.html"><a href="strings.html#repetition"><i class="fa fa-check"></i><b>14.3.4</b> Repetition</a></li>
<li class="chapter" data-level="14.3.5" data-path="strings.html"><a href="strings.html#grouping-and-backreferences"><i class="fa fa-check"></i><b>14.3.5</b> Grouping and backreferences</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="strings.html"><a href="strings.html#tools"><i class="fa fa-check"></i><b>14.4</b> Tools</a><ul>
<li class="chapter" data-level="14.4.1" data-path="strings.html"><a href="strings.html#detect-matches"><i class="fa fa-check"></i><b>14.4.1</b> Detect matches</a></li>
<li class="chapter" data-level="14.4.2" data-path="strings.html"><a href="strings.html#exercises-1"><i class="fa fa-check"></i><b>14.4.2</b> Exercises</a></li>
<li class="chapter" data-level="14.4.3" data-path="strings.html"><a href="strings.html#extract-matches"><i class="fa fa-check"></i><b>14.4.3</b> Extract Matches</a></li>
<li class="chapter" data-level="14.4.4" data-path="strings.html"><a href="strings.html#grouped-matches"><i class="fa fa-check"></i><b>14.4.4</b> Grouped Matches</a></li>
<li class="chapter" data-level="14.4.5" data-path="strings.html"><a href="strings.html#replacing-matches"><i class="fa fa-check"></i><b>14.4.5</b> Replacing Matches</a></li>
<li class="chapter" data-level="14.4.6" data-path="strings.html"><a href="strings.html#splitting"><i class="fa fa-check"></i><b>14.4.6</b> Splitting</a></li>
<li class="chapter" data-level="14.4.7" data-path="strings.html"><a href="strings.html#find-matches"><i class="fa fa-check"></i><b>14.4.7</b> Find matches</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="strings.html"><a href="strings.html#other-types-of-patterns"><i class="fa fa-check"></i><b>14.5</b> Other types of patterns</a><ul>
<li><a href="strings.html#exercise-14.5.1">Exercise <span class="exercise-number">14.5.1</span></a></li>
<li><a href="strings.html#exercise-14.5.2">Exercise <span class="exercise-number">14.5.2</span></a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="strings.html"><a href="strings.html#other-uses-of-regular-expressions"><i class="fa fa-check"></i><b>14.6</b> Other uses of regular expressions</a></li>
<li class="chapter" data-level="14.7" data-path="strings.html"><a href="strings.html#stringi"><i class="fa fa-check"></i><b>14.7</b> stringi</a><ul>
<li><a href="strings.html#exercise-14.7.1">Exercise <span class="exercise-number">14.7.1</span></a></li>
<li><a href="strings.html#exercise-14.7.2">Exercise <span class="exercise-number">14.7.2</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="factors.html"><a href="factors.html"><i class="fa fa-check"></i><b>15</b> Factors</a><ul>
<li class="chapter" data-level="15.1" data-path="factors.html"><a href="factors.html#introduction-10"><i class="fa fa-check"></i><b>15.1</b> Introduction</a></li>
<li class="chapter" data-level="15.2" data-path="factors.html"><a href="factors.html#creating-factors"><i class="fa fa-check"></i><b>15.2</b> Creating Factors</a></li>
<li class="chapter" data-level="15.3" data-path="factors.html"><a href="factors.html#general-social-survey"><i class="fa fa-check"></i><b>15.3</b> General Social Survey</a><ul>
<li><a href="factors.html#exercise-15.3.1">Exercise <span class="exercise-number">15.3.1</span></a></li>
<li><a href="factors.html#exercise-15.3.2">Exercise <span class="exercise-number">15.3.2</span></a></li>
<li><a href="factors.html#exercise-15.3.3">Exercise <span class="exercise-number">15.3.3</span></a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="factors.html"><a href="factors.html#modifying-factor-order"><i class="fa fa-check"></i><b>15.4</b> Modifying factor order</a><ul>
<li><a href="factors.html#exercise-15.4.1">Exercise <span class="exercise-number">15.4.1</span></a></li>
<li><a href="factors.html#exercise-15.4.2">Exercise <span class="exercise-number">15.4.2</span></a></li>
<li><a href="factors.html#exercise-15.4.3">Exercise <span class="exercise-number">15.4.3</span></a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="factors.html"><a href="factors.html#modifying-factor-levels"><i class="fa fa-check"></i><b>15.5</b> Modifying factor levels</a><ul>
<li><a href="factors.html#exercise-15.5.1">Exercise <span class="exercise-number">15.5.1</span></a></li>
<li><a href="factors.html#exercise-15.5.2">Exercise <span class="exercise-number">15.5.2</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="dates-and-times.html"><a href="dates-and-times.html"><i class="fa fa-check"></i><b>16</b> Dates and times</a><ul>
<li class="chapter" data-level="16.1" data-path="dates-and-times.html"><a href="dates-and-times.html#introduction-11"><i class="fa fa-check"></i><b>16.1</b> Introduction</a></li>
<li class="chapter" data-level="16.2" data-path="dates-and-times.html"><a href="dates-and-times.html#creating-datetimes"><i class="fa fa-check"></i><b>16.2</b> Creating date/times</a><ul>
<li><a href="dates-and-times.html#exercise-16.2.1">Exercise <span class="exercise-number">16.2.1</span></a></li>
<li><a href="dates-and-times.html#exercise-16.2.2">Exercise <span class="exercise-number">16.2.2</span></a></li>
<li><a href="dates-and-times.html#exercise-16.2.3">Exercise <span class="exercise-number">16.2.3</span></a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="dates-and-times.html"><a href="dates-and-times.html#date-time-components"><i class="fa fa-check"></i><b>16.3</b> Date-Time Components</a><ul>
<li><a href="dates-and-times.html#exercise-16.3.1">Exercise <span class="exercise-number">16.3.1</span></a></li>
<li><a href="dates-and-times.html#exercise-16.3.2">Exercise <span class="exercise-number">16.3.2</span></a></li>
<li><a href="dates-and-times.html#exercise-16.3.3">Exercise <span class="exercise-number">16.3.3</span></a></li>
<li><a href="dates-and-times.html#exercise-16.3.4">Exercise <span class="exercise-number">16.3.4</span></a></li>
<li><a href="dates-and-times.html#exercise-16.3.5">Exercise <span class="exercise-number">16.3.5</span></a></li>
<li><a href="dates-and-times.html#exercise-16.3.6">Exercise <span class="exercise-number">16.3.6</span></a></li>
<li><a href="dates-and-times.html#exercise-16.3.7">Exercise <span class="exercise-number">16.3.7</span></a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="dates-and-times.html"><a href="dates-and-times.html#time-spans"><i class="fa fa-check"></i><b>16.4</b> Time Spans</a><ul>
<li><a href="dates-and-times.html#exercise-16.4.1">Exercise <span class="exercise-number">16.4.1</span></a></li>
<li><a href="dates-and-times.html#exercise-16.4.2">Exercise <span class="exercise-number">16.4.2</span></a></li>
<li><a href="dates-and-times.html#exercise-16.4.3">Exercise <span class="exercise-number">16.4.3</span></a></li>
<li><a href="dates-and-times.html#exercise-16.4.4">Exercise <span class="exercise-number">16.4.4</span></a></li>
<li><a href="dates-and-times.html#exercise-16.4.5">Exercise <span class="exercise-number">16.4.5</span></a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="dates-and-times.html"><a href="dates-and-times.html#time-zones"><i class="fa fa-check"></i><b>16.5</b> Time Zones</a></li>
</ul></li>
<li class="part"><span><b>III Program</b></span></li>
<li class="chapter" data-level="17" data-path="program-intro.html"><a href="program-intro.html"><i class="fa fa-check"></i><b>17</b> Introduction</a></li>
<li class="chapter" data-level="18" data-path="pipes.html"><a href="pipes.html"><i class="fa fa-check"></i><b>18</b> Pipes</a></li>
<li class="chapter" data-level="19" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>19</b> Functions</a><ul>
<li class="chapter" data-level="19.1" data-path="functions.html"><a href="functions.html#introduction-12"><i class="fa fa-check"></i><b>19.1</b> Introduction</a></li>
<li class="chapter" data-level="19.2" data-path="functions.html"><a href="functions.html#when-should-you-write-a-function"><i class="fa fa-check"></i><b>19.2</b> When should you write a function?</a><ul>
<li><a href="functions.html#exercise-19.2.1">Exercise <span class="exercise-number">19.2.1</span></a></li>
<li><a href="functions.html#exercise-19.2.2">Exercise <span class="exercise-number">19.2.2</span></a></li>
<li><a href="functions.html#exercise-19.2.3">Exercise <span class="exercise-number">19.2.3</span></a></li>
<li><a href="functions.html#exercise-19.2.4">Exercise <span class="exercise-number">19.2.4</span></a></li>
<li><a href="functions.html#exercise-19.2.5">Exercise <span class="exercise-number">19.2.5</span></a></li>
<li><a href="functions.html#exercise-19.2.6">Exercise <span class="exercise-number">19.2.6</span></a></li>
<li><a href="functions.html#exercise-19.2.7">Exercise <span class="exercise-number">19.2.7</span></a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="functions.html"><a href="functions.html#functions-are-for-humans-and-computers"><i class="fa fa-check"></i><b>19.3</b> Functions are for humans and computers</a><ul>
<li><a href="functions.html#exercise-19.3.1">Exercise <span class="exercise-number">19.3.1</span></a></li>
<li><a href="functions.html#exercise-19.3.2">Exercise <span class="exercise-number">19.3.2</span></a></li>
<li><a href="functions.html#exercise-19.3.3">Exercise <span class="exercise-number">19.3.3</span></a></li>
<li><a href="functions.html#exercise-19.3.4">Exercise <span class="exercise-number">19.3.4</span></a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="functions.html"><a href="functions.html#conditional-execution"><i class="fa fa-check"></i><b>19.4</b> Conditional execution</a><ul>
<li><a href="functions.html#exercise-19.4.1">Exercise <span class="exercise-number">19.4.1</span></a></li>
<li><a href="functions.html#exercise-19.4.2">Exercise <span class="exercise-number">19.4.2</span></a></li>
<li><a href="functions.html#exercise-19.4.3">Exercise <span class="exercise-number">19.4.3</span></a></li>
<li><a href="functions.html#exercise-19.4.4">Exercise <span class="exercise-number">19.4.4</span></a></li>
<li><a href="functions.html#exercise-19.4.5">Exercise <span class="exercise-number">19.4.5</span></a></li>
<li><a href="functions.html#exercise-19.4.6">Exercise <span class="exercise-number">19.4.6</span></a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="functions.html"><a href="functions.html#function-arguments"><i class="fa fa-check"></i><b>19.5</b> Function arguments</a><ul>
<li><a href="functions.html#exercise-19.5.1">Exercise <span class="exercise-number">19.5.1</span></a></li>
<li><a href="functions.html#exercise-19.5.2">Exercise <span class="exercise-number">19.5.2</span></a></li>
<li><a href="functions.html#exercise-19.5.3">Exercise <span class="exercise-number">19.5.3</span></a></li>
<li><a href="functions.html#exercise-19.5.4">Exercise <span class="exercise-number">19.5.4</span></a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="functions.html"><a href="functions.html#return-values"><i class="fa fa-check"></i><b>19.6</b> Return values</a></li>
<li class="chapter" data-level="19.7" data-path="functions.html"><a href="functions.html#environment"><i class="fa fa-check"></i><b>19.7</b> Environment</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>20</b> Vectors</a><ul>
<li class="chapter" data-level="20.1" data-path="vectors.html"><a href="vectors.html#introduction-13"><i class="fa fa-check"></i><b>20.1</b> Introduction</a></li>
<li class="chapter" data-level="20.2" data-path="vectors.html"><a href="vectors.html#vector-basics"><i class="fa fa-check"></i><b>20.2</b> Vector Basics</a></li>
<li class="chapter" data-level="20.3" data-path="vectors.html"><a href="vectors.html#important-types-of-atomic-vector"><i class="fa fa-check"></i><b>20.3</b> Important Types of Atomic Vector</a><ul>
<li><a href="vectors.html#exercise-20.3.1">Exercise <span class="exercise-number">20.3.1</span></a></li>
<li><a href="vectors.html#exercise-20.3.2">Exercise <span class="exercise-number">20.3.2</span></a></li>
<li><a href="vectors.html#exercise-20.3.3">Exercise <span class="exercise-number">20.3.3</span></a></li>
<li><a href="vectors.html#exercise-20.3.4">Exercise <span class="exercise-number">20.3.4</span></a></li>
<li><a href="vectors.html#exercise-20.3.5">Exercise <span class="exercise-number">20.3.5</span></a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="vectors.html"><a href="vectors.html#using-atomic-vectors"><i class="fa fa-check"></i><b>20.4</b> Using atomic vectors</a><ul>
<li><a href="vectors.html#exercise-20.4.1">Exercise <span class="exercise-number">20.4.1</span></a></li>
<li><a href="vectors.html#exercise-20.4.2">Exercise <span class="exercise-number">20.4.2</span></a></li>
<li><a href="vectors.html#exercise-20.4.3">Exercise <span class="exercise-number">20.4.3</span></a></li>
<li><a href="vectors.html#exercise-20.4.4">Exercise <span class="exercise-number">20.4.4</span></a></li>
<li><a href="vectors.html#exercise-20.4.5">Exercise <span class="exercise-number">20.4.5</span></a></li>
<li><a href="vectors.html#exercise-20.4.6">Exercise <span class="exercise-number">20.4.6</span></a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="vectors.html"><a href="vectors.html#recursive-vectors-lists"><i class="fa fa-check"></i><b>20.5</b> Recursive Vectors (lists)</a><ul>
<li><a href="vectors.html#exercise-20.5.1">Exercise <span class="exercise-number">20.5.1</span></a></li>
<li><a href="vectors.html#exercise-20.5.2">Exercise <span class="exercise-number">20.5.2</span></a></li>
</ul></li>
<li class="chapter" data-level="20.6" data-path="vectors.html"><a href="vectors.html#attributes"><i class="fa fa-check"></i><b>20.6</b> Attributes</a></li>
<li class="chapter" data-level="20.7" data-path="vectors.html"><a href="vectors.html#augmented-vectors"><i class="fa fa-check"></i><b>20.7</b> Augmented Vectors</a><ul>
<li><a href="vectors.html#exercise-20.7.1">Exercise <span class="exercise-number">20.7.1</span></a></li>
<li><a href="vectors.html#exercise-20.7.2">Exercise <span class="exercise-number">20.7.2</span></a></li>
<li><a href="vectors.html#exercise-20.7.3">Exercise <span class="exercise-number">20.7.3</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i><b>21</b> Iteration</a><ul>
<li class="chapter" data-level="21.1" data-path="iteration.html"><a href="iteration.html#introduction-14"><i class="fa fa-check"></i><b>21.1</b> Introduction</a></li>
<li class="chapter" data-level="21.2" data-path="iteration.html"><a href="iteration.html#for-loops"><i class="fa fa-check"></i><b>21.2</b> For Loops</a><ul>
<li><a href="iteration.html#exercise-21.2.1">Exercise <span class="exercise-number">21.2.1</span></a></li>
<li><a href="iteration.html#exercise-21.2.2">Exercise <span class="exercise-number">21.2.2</span></a></li>
<li><a href="iteration.html#exercise-21.2.3">Exercise <span class="exercise-number">21.2.3</span></a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="iteration.html"><a href="iteration.html#for-loop-variations"><i class="fa fa-check"></i><b>21.3</b> For loop variations</a><ul>
<li><a href="iteration.html#exercise-21.3.1">Exercise <span class="exercise-number">21.3.1</span></a></li>
<li><a href="iteration.html#exercise-21.3.2">Exercise <span class="exercise-number">21.3.2</span></a></li>
<li><a href="iteration.html#exercise-21.3.3">Exercise <span class="exercise-number">21.3.3</span></a></li>
<li><a href="iteration.html#exercise-21.3.4">Exercise <span class="exercise-number">21.3.4</span></a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="iteration.html"><a href="iteration.html#for-loops-vs.functionals"><i class="fa fa-check"></i><b>21.4</b> For loops vs. functionals</a><ul>
<li><a href="iteration.html#exercise-21.4.1">Exercise <span class="exercise-number">21.4.1</span></a></li>
<li><a href="iteration.html#exercise-21.4.2">Exercise <span class="exercise-number">21.4.2</span></a></li>
</ul></li>
<li class="chapter" data-level="21.5" data-path="iteration.html"><a href="iteration.html#the-map-functions"><i class="fa fa-check"></i><b>21.5</b> The map functions</a><ul>
<li><a href="iteration.html#exercise-21.5.1">Exercise <span class="exercise-number">21.5.1</span></a></li>
<li><a href="iteration.html#exercise-21.5.2">Exercise <span class="exercise-number">21.5.2</span></a></li>
<li><a href="iteration.html#exercise-21.5.3">Exercise <span class="exercise-number">21.5.3</span></a></li>
<li><a href="iteration.html#exercise-21.5.4">Exercise <span class="exercise-number">21.5.4</span></a></li>
<li><a href="iteration.html#exercise-21.5.5">Exercise <span class="exercise-number">21.5.5</span></a></li>
</ul></li>
<li class="chapter" data-level="21.6" data-path="iteration.html"><a href="iteration.html#dealing-with-failure"><i class="fa fa-check"></i><b>21.6</b> Dealing with Failure</a></li>
<li class="chapter" data-level="21.7" data-path="iteration.html"><a href="iteration.html#mapping-over-multiple-arguments"><i class="fa fa-check"></i><b>21.7</b> Mapping over multiple arguments</a></li>
<li class="chapter" data-level="21.8" data-path="iteration.html"><a href="iteration.html#walk"><i class="fa fa-check"></i><b>21.8</b> Walk</a></li>
<li class="chapter" data-level="21.9" data-path="iteration.html"><a href="iteration.html#other-patterns-of-for-loops"><i class="fa fa-check"></i><b>21.9</b> Other patterns of for loops</a><ul>
<li><a href="iteration.html#exercise-21.9.1">Exercise <span class="exercise-number">21.9.1</span></a></li>
<li><a href="iteration.html#exercise-21.9.2">Exercise <span class="exercise-number">21.9.2</span></a></li>
<li><a href="iteration.html#exercise-21.9.3">Exercise <span class="exercise-number">21.9.3</span></a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Model</b></span></li>
<li class="chapter" data-level="22" data-path="model-intro.html"><a href="model-intro.html"><i class="fa fa-check"></i><b>22</b> Introduction</a></li>
<li class="chapter" data-level="23" data-path="model-basics.html"><a href="model-basics.html"><i class="fa fa-check"></i><b>23</b> Model basics</a><ul>
<li class="chapter" data-level="23.1" data-path="model-basics.html"><a href="model-basics.html#prerequisites-1"><i class="fa fa-check"></i><b>23.1</b> Prerequisites</a></li>
<li class="chapter" data-level="23.2" data-path="model-basics.html"><a href="model-basics.html#a-simple-model"><i class="fa fa-check"></i><b>23.2</b> A simple model</a><ul>
<li><a href="model-basics.html#exercise-23.2.1">Exercise <span class="exercise-number">23.2.1</span></a></li>
<li><a href="model-basics.html#exercise-23.2.2">Exercise <span class="exercise-number">23.2.2</span></a></li>
<li><a href="model-basics.html#exercise-23.2.3">Exercise <span class="exercise-number">23.2.3</span></a></li>
</ul></li>
<li class="chapter" data-level="23.3" data-path="model-basics.html"><a href="model-basics.html#visualizing-models"><i class="fa fa-check"></i><b>23.3</b> Visualizing Models</a><ul>
<li><a href="model-basics.html#exercise-23.3.1">Exercise <span class="exercise-number">23.3.1</span></a></li>
<li><a href="model-basics.html#exercise-23.3.2">Exercise <span class="exercise-number">23.3.2</span></a></li>
<li><a href="model-basics.html#exercise-23.3.3">Exercise <span class="exercise-number">23.3.3</span></a></li>
<li><a href="model-basics.html#exercise-23.3.4">Exercise <span class="exercise-number">23.3.4</span></a></li>
</ul></li>
<li class="chapter" data-level="23.4" data-path="model-basics.html"><a href="model-basics.html#formulas-and-model-families"><i class="fa fa-check"></i><b>23.4</b> Formulas and Model Families</a><ul>
<li><a href="model-basics.html#exercise-23.4.1">Exercise <span class="exercise-number">23.4.1</span></a></li>
<li><a href="model-basics.html#exercise-23.4.2">Exercise <span class="exercise-number">23.4.2</span></a></li>
<li><a href="model-basics.html#exercise-23.4.3">Exercise <span class="exercise-number">23.4.3</span></a></li>
<li><a href="model-basics.html#exercise-23.4.4">Exercise <span class="exercise-number">23.4.4</span></a></li>
</ul></li>
<li class="chapter" data-level="23.5" data-path="model-basics.html"><a href="model-basics.html#missing-values-2"><i class="fa fa-check"></i><b>23.5</b> Missing values</a></li>
<li class="chapter" data-level="23.6" data-path="model-basics.html"><a href="model-basics.html#other-model-families"><i class="fa fa-check"></i><b>23.6</b> Other model families</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="model-building.html"><a href="model-building.html"><i class="fa fa-check"></i><b>24</b> Model building</a><ul>
<li class="chapter" data-level="24.1" data-path="model-building.html"><a href="model-building.html#introduction-15"><i class="fa fa-check"></i><b>24.1</b> Introduction</a></li>
<li class="chapter" data-level="24.2" data-path="model-building.html"><a href="model-building.html#why-are-low-quality-diamonds-more-expensive"><i class="fa fa-check"></i><b>24.2</b> Why are low quality diamonds more expensive?</a><ul>
<li><a href="model-building.html#exercise-24.2.1">Exercise <span class="exercise-number">24.2.1</span></a></li>
<li><a href="model-building.html#exercise-24.2.2">Exercise <span class="exercise-number">24.2.2</span></a></li>
<li><a href="model-building.html#exercise-24.2.3">Exercise <span class="exercise-number">24.2.3</span></a></li>
<li><a href="model-building.html#exercise-24.2.4">Exercise <span class="exercise-number">24.2.4</span></a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="model-building.html"><a href="model-building.html#what-affects-the-number-of-daily-flights"><i class="fa fa-check"></i><b>24.3</b> What affects the number of daily flights?</a><ul>
<li><a href="model-building.html#exercise-24.3.1">Exercise <span class="exercise-number">24.3.1</span></a></li>
<li><a href="model-building.html#exercise-24.3.2">Exercise <span class="exercise-number">24.3.2</span></a></li>
<li><a href="model-building.html#exercise-24.3.3">Exercise <span class="exercise-number">24.3.3</span></a></li>
<li><a href="model-building.html#exercise-24.3.4">Exercise <span class="exercise-number">24.3.4</span></a></li>
<li><a href="model-building.html#exercise-24.3.5">Exercise <span class="exercise-number">24.3.5</span></a></li>
<li><a href="model-building.html#exercise-24.3.6">Exercise <span class="exercise-number">24.3.6</span></a></li>
<li><a href="model-building.html#exercise-24.3.7">Exercise <span class="exercise-number">24.3.7</span></a></li>
<li><a href="model-building.html#exercise-24.3.8">Exercise <span class="exercise-number">24.3.8</span></a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="model-building.html"><a href="model-building.html#learning-more-about-models"><i class="fa fa-check"></i><b>24.4</b> Learning more about models</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="many-models.html"><a href="many-models.html"><i class="fa fa-check"></i><b>25</b> Many models</a><ul>
<li class="chapter" data-level="25.1" data-path="many-models.html"><a href="many-models.html#introduction-16"><i class="fa fa-check"></i><b>25.1</b> Introduction</a></li>
<li class="chapter" data-level="25.2" data-path="many-models.html"><a href="many-models.html#gapminder"><i class="fa fa-check"></i><b>25.2</b> Gapminder</a><ul>
<li><a href="many-models.html#exercise-25.2.1">Exercise <span class="exercise-number">25.2.1</span></a></li>
<li><a href="many-models.html#exercise-25.2.2">Exercise <span class="exercise-number">25.2.2</span></a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="many-models.html"><a href="many-models.html#list-columns"><i class="fa fa-check"></i><b>25.3</b> List-columns</a></li>
<li class="chapter" data-level="25.4" data-path="many-models.html"><a href="many-models.html#creating-list-columns"><i class="fa fa-check"></i><b>25.4</b> Creating list-columns</a><ul>
<li><a href="many-models.html#exercise-25.4.1">Exercise <span class="exercise-number">25.4.1</span></a></li>
<li><a href="many-models.html#exercise-25.4.2">Exercise <span class="exercise-number">25.4.2</span></a></li>
<li><a href="many-models.html#exercise-25.4.3">Exercise <span class="exercise-number">25.4.3</span></a></li>
<li><a href="many-models.html#exercise-25.4.4">Exercise <span class="exercise-number">25.4.4</span></a></li>
</ul></li>
<li class="chapter" data-level="25.5" data-path="many-models.html"><a href="many-models.html#simplifying-list-columns"><i class="fa fa-check"></i><b>25.5</b> Simplifying list-columns</a><ul>
<li><a href="many-models.html#exercise-25.5.1">Exercise <span class="exercise-number">25.5.1</span></a></li>
<li><a href="many-models.html#exercise-25.5.2">Exercise <span class="exercise-number">25.5.2</span></a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Communicate</b></span></li>
<li class="chapter" data-level="26" data-path="communicate-intro.html"><a href="communicate-intro.html"><i class="fa fa-check"></i><b>26</b> Introduction</a></li>
<li class="chapter" data-level="27" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>27</b> R Markdown</a><ul>
<li class="chapter" data-level="27.1" data-path="r-markdown.html"><a href="r-markdown.html#introduction-17"><i class="fa fa-check"></i><b>27.1</b> Introduction</a></li>
<li class="chapter" data-level="27.2" data-path="r-markdown.html"><a href="r-markdown.html#r-markdown-basics"><i class="fa fa-check"></i><b>27.2</b> R Markdown Basics</a><ul>
<li><a href="r-markdown.html#exercise-27.2.1">Exercise <span class="exercise-number">27.2.1</span></a></li>
<li><a href="r-markdown.html#exercise-27.2.2">Exercise <span class="exercise-number">27.2.2</span></a></li>
<li><a href="r-markdown.html#exercise-27.2.3">Exercise <span class="exercise-number">27.2.3</span></a></li>
<li><a href="r-markdown.html#exercise-27.2.4">Exercise <span class="exercise-number">27.2.4</span></a></li>
</ul></li>
<li class="chapter" data-level="27.3" data-path="r-markdown.html"><a href="r-markdown.html#text-formatting-with-r-markdown"><i class="fa fa-check"></i><b>27.3</b> Text formatting with R Markdown</a><ul>
<li><a href="r-markdown.html#exercise-27.3.1">Exercise <span class="exercise-number">27.3.1</span></a></li>
<li><a href="r-markdown.html#exercise-27.3.2">Exercise <span class="exercise-number">27.3.2</span></a></li>
<li><a href="r-markdown.html#exercise-27.3.3">Exercise <span class="exercise-number">27.3.3</span></a></li>
</ul></li>
<li class="chapter" data-level="27.4" data-path="r-markdown.html"><a href="r-markdown.html#code-chunks"><i class="fa fa-check"></i><b>27.4</b> Code Chunks</a><ul>
<li><a href="r-markdown.html#exercise-27.4.1">Exercise <span class="exercise-number">27.4.1</span></a></li>
<li><a href="r-markdown.html#exercise-27.4.2">Exercise <span class="exercise-number">27.4.2</span></a></li>
<li><a href="r-markdown.html#exercise-27.4.3">Exercise <span class="exercise-number">27.4.3</span></a></li>
<li><a href="r-markdown.html#exercise-27.4.4">Exercise <span class="exercise-number">27.4.4</span></a></li>
</ul></li>
<li class="chapter" data-level="27.5" data-path="r-markdown.html"><a href="r-markdown.html#yaml-header"><i class="fa fa-check"></i><b>27.5</b> YAML header</a></li>
<li class="chapter" data-level="27.6" data-path="r-markdown.html"><a href="r-markdown.html#learning-more-1"><i class="fa fa-check"></i><b>27.6</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html"><i class="fa fa-check"></i><b>28</b> Graphics for communication</a><ul>
<li class="chapter" data-level="28.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#introduction-18"><i class="fa fa-check"></i><b>28.1</b> Introduction</a></li>
<li class="chapter" data-level="28.2" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#label"><i class="fa fa-check"></i><b>28.2</b> Label</a><ul>
<li><a href="graphics-for-communication.html#exercise-28.2.1">Exercise <span class="exercise-number">28.2.1</span></a></li>
<li><a href="graphics-for-communication.html#exercise-28.2.2">Exercise <span class="exercise-number">28.2.2</span></a></li>
<li><a href="graphics-for-communication.html#exercise-28.2.3">Exercise <span class="exercise-number">28.2.3</span></a></li>
</ul></li>
<li class="chapter" data-level="28.3" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#annotations"><i class="fa fa-check"></i><b>28.3</b> Annotations</a><ul>
<li><a href="graphics-for-communication.html#exercise-28.3.1">Exercise <span class="exercise-number">28.3.1</span></a></li>
<li><a href="graphics-for-communication.html#exercise-28.3.2">Exercise <span class="exercise-number">28.3.2</span></a></li>
<li><a href="graphics-for-communication.html#exercise-28.3.3">Exercise <span class="exercise-number">28.3.3</span></a></li>
<li><a href="graphics-for-communication.html#exercise-28.3.4">Exercise <span class="exercise-number">28.3.4</span></a></li>
<li><a href="graphics-for-communication.html#exercise-28.3.5">Exercise <span class="exercise-number">28.3.5</span></a></li>
</ul></li>
<li class="chapter" data-level="28.4" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#scales"><i class="fa fa-check"></i><b>28.4</b> Scales</a><ul>
<li><a href="graphics-for-communication.html#exercise-28.4.1">Exercise <span class="exercise-number">28.4.1</span></a></li>
<li><a href="graphics-for-communication.html#exercise-28.4.2">Exercise <span class="exercise-number">28.4.2</span></a></li>
<li><a href="graphics-for-communication.html#exercise-28.4.3">Exercise <span class="exercise-number">28.4.3</span></a></li>
<li><a href="graphics-for-communication.html#exercise-28.4.4">Exercise <span class="exercise-number">28.4.4</span></a></li>
</ul></li>
<li class="chapter" data-level="28.5" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#zooming"><i class="fa fa-check"></i><b>28.5</b> Zooming</a></li>
<li class="chapter" data-level="28.6" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#themes"><i class="fa fa-check"></i><b>28.6</b> Themes</a></li>
<li class="chapter" data-level="28.7" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#saving-your-plots"><i class="fa fa-check"></i><b>28.7</b> Saving your plots</a></li>
<li class="chapter" data-level="28.8" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#learning-more-2"><i class="fa fa-check"></i><b>28.8</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html"><i class="fa fa-check"></i><b>29</b> R Markdown formats</a></li>
<li class="chapter" data-level="30" data-path="r-markdown-workflow.html"><a href="r-markdown-workflow.html"><i class="fa fa-check"></i><b>30</b> R Markdown workflow</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Data Science Solutions</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidy-data" class="section level1">
<h1><span class="header-section-number">12</span> Tidy Data</h1>
<div id="introduction-7" class="section level2">
<h2><span class="header-section-number">12.1</span> Introduction</h2>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb224-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
</div>
<div id="tidy-data-1" class="section level2">
<h2><span class="header-section-number">12.2</span> Tidy data</h2>
<div id="exercise-12.2.1" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.2.1</span></h3>
<div class="question">
<p>Using prose, describe how the variables and observations are organized in each of the sample tables.</p>
</div>
<div class="answer">
<p>In <code>table1</code> each row is a (country, year) with variables <code>cases</code> and <code>population</code>.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb225-1" data-line-number="1">table1</a>
<a class="sourceLine" id="cb225-2" data-line-number="2"><span class="co">#&gt; # A tibble: 6 x 4</span></a>
<a class="sourceLine" id="cb225-3" data-line-number="3"><span class="co">#&gt;   country      year  cases population</span></a>
<a class="sourceLine" id="cb225-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb225-5" data-line-number="5"><span class="co">#&gt; 1 Afghanistan  1999    745   19987071</span></a>
<a class="sourceLine" id="cb225-6" data-line-number="6"><span class="co">#&gt; 2 Afghanistan  2000   2666   20595360</span></a>
<a class="sourceLine" id="cb225-7" data-line-number="7"><span class="co">#&gt; 3 Brazil       1999  37737  172006362</span></a>
<a class="sourceLine" id="cb225-8" data-line-number="8"><span class="co">#&gt; 4 Brazil       2000  80488  174504898</span></a>
<a class="sourceLine" id="cb225-9" data-line-number="9"><span class="co">#&gt; 5 China        1999 212258 1272915272</span></a>
<a class="sourceLine" id="cb225-10" data-line-number="10"><span class="co">#&gt; 6 China        2000 213766 1280428583</span></a></code></pre></div>
<p>In <code>table2</code>, each row is country, year , variable (“cases”, “population”) combination, and there is a <code>count</code> variable with the numeric value of the variable.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb226-1" data-line-number="1">table2</a>
<a class="sourceLine" id="cb226-2" data-line-number="2"><span class="co">#&gt; # A tibble: 12 x 4</span></a>
<a class="sourceLine" id="cb226-3" data-line-number="3"><span class="co">#&gt;   country      year type           count</span></a>
<a class="sourceLine" id="cb226-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;          &lt;int&gt;</span></a>
<a class="sourceLine" id="cb226-5" data-line-number="5"><span class="co">#&gt; 1 Afghanistan  1999 cases            745</span></a>
<a class="sourceLine" id="cb226-6" data-line-number="6"><span class="co">#&gt; 2 Afghanistan  1999 population  19987071</span></a>
<a class="sourceLine" id="cb226-7" data-line-number="7"><span class="co">#&gt; 3 Afghanistan  2000 cases           2666</span></a>
<a class="sourceLine" id="cb226-8" data-line-number="8"><span class="co">#&gt; 4 Afghanistan  2000 population  20595360</span></a>
<a class="sourceLine" id="cb226-9" data-line-number="9"><span class="co">#&gt; 5 Brazil       1999 cases          37737</span></a>
<a class="sourceLine" id="cb226-10" data-line-number="10"><span class="co">#&gt; 6 Brazil       1999 population 172006362</span></a>
<a class="sourceLine" id="cb226-11" data-line-number="11"><span class="co">#&gt; # ... with 6 more rows</span></a></code></pre></div>
<p>In <code>table3</code>, each row is a (country, year) combination with the column <code>rate</code> having the rate of cases to population as a character string in the format <code>&quot;cases/rate&quot;</code>.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb227-1" data-line-number="1">table3</a>
<a class="sourceLine" id="cb227-2" data-line-number="2"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb227-3" data-line-number="3"><span class="co">#&gt;   country      year rate             </span></a>
<a class="sourceLine" id="cb227-4" data-line-number="4"><span class="co">#&gt; * &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            </span></a>
<a class="sourceLine" id="cb227-5" data-line-number="5"><span class="co">#&gt; 1 Afghanistan  1999 745/19987071     </span></a>
<a class="sourceLine" id="cb227-6" data-line-number="6"><span class="co">#&gt; 2 Afghanistan  2000 2666/20595360    </span></a>
<a class="sourceLine" id="cb227-7" data-line-number="7"><span class="co">#&gt; 3 Brazil       1999 37737/172006362  </span></a>
<a class="sourceLine" id="cb227-8" data-line-number="8"><span class="co">#&gt; 4 Brazil       2000 80488/174504898  </span></a>
<a class="sourceLine" id="cb227-9" data-line-number="9"><span class="co">#&gt; 5 China        1999 212258/1272915272</span></a>
<a class="sourceLine" id="cb227-10" data-line-number="10"><span class="co">#&gt; 6 China        2000 213766/1280428583</span></a></code></pre></div>
<p>Table 4 is split into two tables, one table for each variable: <code>table4a</code> is the table for cases, while <code>table4b</code> is the table for population. Within each table, each row is a country, each column is a year, and the cells are the value of the variable for the table.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb228-1" data-line-number="1">table4a</a>
<a class="sourceLine" id="cb228-2" data-line-number="2"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb228-3" data-line-number="3"><span class="co">#&gt;   country     `1999` `2000`</span></a>
<a class="sourceLine" id="cb228-4" data-line-number="4"><span class="co">#&gt; * &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb228-5" data-line-number="5"><span class="co">#&gt; 1 Afghanistan    745   2666</span></a>
<a class="sourceLine" id="cb228-6" data-line-number="6"><span class="co">#&gt; 2 Brazil       37737  80488</span></a>
<a class="sourceLine" id="cb228-7" data-line-number="7"><span class="co">#&gt; 3 China       212258 213766</span></a></code></pre></div>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb229-1" data-line-number="1">table4b</a>
<a class="sourceLine" id="cb229-2" data-line-number="2"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb229-3" data-line-number="3"><span class="co">#&gt;   country         `1999`     `2000`</span></a>
<a class="sourceLine" id="cb229-4" data-line-number="4"><span class="co">#&gt; * &lt;chr&gt;            &lt;int&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb229-5" data-line-number="5"><span class="co">#&gt; 1 Afghanistan   19987071   20595360</span></a>
<a class="sourceLine" id="cb229-6" data-line-number="6"><span class="co">#&gt; 2 Brazil       172006362  174504898</span></a>
<a class="sourceLine" id="cb229-7" data-line-number="7"><span class="co">#&gt; 3 China       1272915272 1280428583</span></a></code></pre></div>
</div>
</div>
<div id="exercise-12.2.2" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.2.2</span></h3>
<div class="question">
<p>Compute the <code>rate</code> for <code>table2</code>, and <code>table4a</code> + <code>table4b</code>. You will need to perform four operations:</p>
<ol style="list-style-type: decimal">
<li>Extract the number of TB cases per country per year.</li>
<li>Extract the matching population per country per year.</li>
<li>Divide cases by population, and multiply by 10000.</li>
<li>Store back in the appropriate place.</li>
</ol>
<p>Which representation is easiest to work with? Which is hardest? Why?</p>
</div>
<div class="answer">
<p>In order to calculate cases per person, we need to divide cases by population for each country, year.
This is easiest if country and population are two columns in a data frame with country and year rows.</p>
<p>For Table 2, we need to first create separate tables
for cases and population and ensure that they are sorted in the same order.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb230-1" data-line-number="1">t2_cases &lt;-<span class="st"> </span><span class="kw">filter</span>(table2, type <span class="op">==</span><span class="st"> &quot;cases&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb230-2" data-line-number="2"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">cases =</span> count) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb230-3" data-line-number="3"><span class="st">  </span><span class="kw">arrange</span>(country, year)</a>
<a class="sourceLine" id="cb230-4" data-line-number="4">t2_population &lt;-<span class="st"> </span><span class="kw">filter</span>(table2, type <span class="op">==</span><span class="st"> &quot;population&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb230-5" data-line-number="5"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">population =</span> count) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb230-6" data-line-number="6"><span class="st">  </span><span class="kw">arrange</span>(country, year)</a></code></pre></div>
<p>Calculate the cases per capita in a separate data frame.</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb231-1" data-line-number="1">t2_cases_per_cap &lt;-<span class="st"> </span>t2_cases <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb231-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">population =</span> t2_population<span class="op">$</span>population,</a>
<a class="sourceLine" id="cb231-3" data-line-number="3">         <span class="dt">cases_per_cap =</span> (cases <span class="op">/</span><span class="st"> </span>population) <span class="op">*</span><span class="st"> </span><span class="dv">10000</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb231-4" data-line-number="4"><span class="st">  </span><span class="kw">select</span>(country, year, cases_per_cap)</a></code></pre></div>
<p>Since the question asks us to store it back in the appropriate location, we will add new rows with
<code>type = &quot;cases_per_cap&quot;</code> to <code>table2</code> and then
sort by country, year, and variable type as in the original table.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb232-1" data-line-number="1">t2_cases_per_cap &lt;-<span class="st"> </span>t2_cases_per_cap <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb232-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">type =</span> <span class="st">&quot;cases_per_cap&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb232-3" data-line-number="3"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">count =</span> cases_per_cap)</a></code></pre></div>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb233-1" data-line-number="1"><span class="kw">bind_rows</span>(table2, t2_cases_per_cap) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb233-2" data-line-number="2"><span class="st">  </span><span class="kw">arrange</span>(country, year, type, count)</a>
<a class="sourceLine" id="cb233-3" data-line-number="3"><span class="co">#&gt; # A tibble: 18 x 4</span></a>
<a class="sourceLine" id="cb233-4" data-line-number="4"><span class="co">#&gt;   country      year type                 count</span></a>
<a class="sourceLine" id="cb233-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;                &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb233-6" data-line-number="6"><span class="co">#&gt; 1 Afghanistan  1999 cases              745    </span></a>
<a class="sourceLine" id="cb233-7" data-line-number="7"><span class="co">#&gt; 2 Afghanistan  1999 cases_per_cap        0.373</span></a>
<a class="sourceLine" id="cb233-8" data-line-number="8"><span class="co">#&gt; 3 Afghanistan  1999 population    19987071    </span></a>
<a class="sourceLine" id="cb233-9" data-line-number="9"><span class="co">#&gt; 4 Afghanistan  2000 cases             2666    </span></a>
<a class="sourceLine" id="cb233-10" data-line-number="10"><span class="co">#&gt; 5 Afghanistan  2000 cases_per_cap        1.29 </span></a>
<a class="sourceLine" id="cb233-11" data-line-number="11"><span class="co">#&gt; 6 Afghanistan  2000 population    20595360    </span></a>
<a class="sourceLine" id="cb233-12" data-line-number="12"><span class="co">#&gt; # ... with 12 more rows</span></a></code></pre></div>
<p>Note that after adding the <code>cases_per_cap</code> rows,
the type of <code>count</code> is coerced to <code>numeric</code> (double) because <code>cases_per_cap</code> is not an integer.</p>
<p>For <code>table4a</code> and <code>table4b</code>, we will create a separate table for cases per capita (<code>table4c</code>), with country rows and year columns.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb234-1" data-line-number="1">table4c &lt;-</a>
<a class="sourceLine" id="cb234-2" data-line-number="2"><span class="st">  </span><span class="kw">tibble</span>(<span class="dt">country =</span> table4a<span class="op">$</span>country,</a>
<a class="sourceLine" id="cb234-3" data-line-number="3">         <span class="st">`</span><span class="dt">1999</span><span class="st">`</span> =<span class="st"> </span>table4a[[<span class="st">&quot;1999&quot;</span>]] <span class="op">/</span><span class="st"> </span>table4b[[<span class="st">&quot;1999&quot;</span>]] <span class="op">*</span><span class="st"> </span><span class="dv">10000</span>,</a>
<a class="sourceLine" id="cb234-4" data-line-number="4">       <span class="st">`</span><span class="dt">2000</span><span class="st">`</span> =<span class="st"> </span>table4a[[<span class="st">&quot;2000&quot;</span>]] <span class="op">/</span><span class="st"> </span>table4b[[<span class="st">&quot;2000&quot;</span>]] <span class="op">*</span><span class="st"> </span><span class="dv">10000</span>)</a>
<a class="sourceLine" id="cb234-5" data-line-number="5">table4c</a>
<a class="sourceLine" id="cb234-6" data-line-number="6"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb234-7" data-line-number="7"><span class="co">#&gt;   country     `1999` `2000`</span></a>
<a class="sourceLine" id="cb234-8" data-line-number="8"><span class="co">#&gt;   &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb234-9" data-line-number="9"><span class="co">#&gt; 1 Afghanistan  0.373   1.29</span></a>
<a class="sourceLine" id="cb234-10" data-line-number="10"><span class="co">#&gt; 2 Brazil       2.19    4.61</span></a>
<a class="sourceLine" id="cb234-11" data-line-number="11"><span class="co">#&gt; 3 China        1.67    1.67</span></a></code></pre></div>
<p>Neither table is particularly easy to work with.
Since <code>table2</code> has separate rows for cases and population we needed to generate a table with columns for cases and population where we could
calculate cases per capita.
<code>table4a</code> and <code>table4b</code> split the cases and population variables into different tables which
made it easy to divide cases by population.
However, we had to repeat this calculation for each row.</p>
<p>The ideal format of a data frame to answer this question is one with columns <code>country</code>, <code>year</code>, <code>cases</code>, and <code>population</code>.
Then problem could be answered with a single <code>mutate()</code> call.</p>
</div>
</div>
<div id="exercise-12.2.3" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.2.3</span></h3>
<div class="question">
<p>Recreate the plot showing change in cases over time using <code>table2</code> instead of <code>table1</code>. What do you need to do first?</p>
</div>
<div class="answer">
<p>Before creating the plot with change in cases over time, we need to filter the data frame to only include rows representing cases of TB.</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb235-1" data-line-number="1">table2 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb235-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(type <span class="op">==</span><span class="st"> &quot;cases&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb235-3" data-line-number="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, count)) <span class="op">+</span></a>
<a class="sourceLine" id="cb235-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">group =</span> country), <span class="dt">colour =</span> <span class="st">&quot;grey50&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb235-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> country)) <span class="op">+</span></a>
<a class="sourceLine" id="cb235-6" data-line-number="6"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">unique</span>(table2<span class="op">$</span>year)) <span class="op">+</span></a>
<a class="sourceLine" id="cb235-7" data-line-number="7"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;cases&quot;</span>)</a></code></pre></div>
<p><img src="tidy_files/figure-html/unnamed-chunk-13-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div id="spreading-and-gathering" class="section level2">
<h2><span class="header-section-number">12.3</span> Spreading and Gathering</h2>
<p>This code is reproduced from the chapter because it is needed by the exercises:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb236-1" data-line-number="1">tidy4a &lt;-<span class="st"> </span>table4a <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb236-2" data-line-number="2"><span class="st">  </span><span class="kw">gather</span>(<span class="st">`</span><span class="dt">1999</span><span class="st">`</span>, <span class="st">`</span><span class="dt">2000</span><span class="st">`</span>, <span class="dt">key =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;cases&quot;</span>)</a>
<a class="sourceLine" id="cb236-3" data-line-number="3">tidy4b &lt;-<span class="st"> </span>table4b <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb236-4" data-line-number="4"><span class="st">  </span><span class="kw">gather</span>(<span class="st">`</span><span class="dt">1999</span><span class="st">`</span>, <span class="st">`</span><span class="dt">2000</span><span class="st">`</span>, <span class="dt">key =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;cases&quot;</span>)</a></code></pre></div>
<div id="exercise-12.3.1" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.3.1</span></h3>
<div class="question">
<p>Why are <code>gather()</code> and <code>spread()</code> not perfectly symmetrical?
Carefully consider the following example:</p>
</div>
<div class="answer">
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb237-1" data-line-number="1">stocks &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb237-2" data-line-number="2">  <span class="dt">year   =</span> <span class="kw">c</span>(<span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2016</span>),</a>
<a class="sourceLine" id="cb237-3" data-line-number="3">  <span class="dt">half  =</span> <span class="kw">c</span>(   <span class="dv">1</span>,    <span class="dv">2</span>,     <span class="dv">1</span>,    <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb237-4" data-line-number="4">  <span class="dt">return =</span> <span class="kw">c</span>(<span class="fl">1.88</span>, <span class="fl">0.59</span>, <span class="fl">0.92</span>, <span class="fl">0.17</span>)</a>
<a class="sourceLine" id="cb237-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb237-6" data-line-number="6">stocks <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb237-7" data-line-number="7"><span class="st">  </span><span class="kw">spread</span>(year, return) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb237-8" data-line-number="8"><span class="st">  </span><span class="kw">gather</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;return&quot;</span>, <span class="st">`</span><span class="dt">2015</span><span class="st">`</span><span class="op">:</span><span class="st">`</span><span class="dt">2016</span><span class="st">`</span>)</a>
<a class="sourceLine" id="cb237-9" data-line-number="9"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb237-10" data-line-number="10"><span class="co">#&gt;    half year  return</span></a>
<a class="sourceLine" id="cb237-11" data-line-number="11"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb237-12" data-line-number="12"><span class="co">#&gt; 1     1 2015    1.88</span></a>
<a class="sourceLine" id="cb237-13" data-line-number="13"><span class="co">#&gt; 2     2 2015    0.59</span></a>
<a class="sourceLine" id="cb237-14" data-line-number="14"><span class="co">#&gt; 3     1 2016    0.92</span></a>
<a class="sourceLine" id="cb237-15" data-line-number="15"><span class="co">#&gt; 4     2 2016    0.17</span></a></code></pre></div>
<p>The functions <code>spread()</code> and <code>gather()</code> are not perfectly symmetrical because column type information is not transferred between them.
In the original table the column <code>year</code> was numeric, but after running <code>spread()</code> and <code>gather()</code> it is a character vector.
This is because variable names are always converted to a character vector by <code>gather()</code>.</p>
<p>The <code>convert</code> argument tries to convert character vectors to the appropriate type.
In the background this uses the <code>type.convert()</code> function.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb238-1" data-line-number="1">stocks <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb238-2" data-line-number="2"><span class="st">  </span><span class="kw">spread</span>(year, return) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb238-3" data-line-number="3"><span class="st">  </span><span class="kw">gather</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;return&quot;</span>, <span class="st">`</span><span class="dt">2015</span><span class="st">`</span><span class="op">:</span><span class="st">`</span><span class="dt">2016</span><span class="st">`</span>, <span class="dt">convert =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb238-4" data-line-number="4"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb238-5" data-line-number="5"><span class="co">#&gt;    half  year return</span></a>
<a class="sourceLine" id="cb238-6" data-line-number="6"><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb238-7" data-line-number="7"><span class="co">#&gt; 1     1  2015   1.88</span></a>
<a class="sourceLine" id="cb238-8" data-line-number="8"><span class="co">#&gt; 2     2  2015   0.59</span></a>
<a class="sourceLine" id="cb238-9" data-line-number="9"><span class="co">#&gt; 3     1  2016   0.92</span></a>
<a class="sourceLine" id="cb238-10" data-line-number="10"><span class="co">#&gt; 4     2  2016   0.17</span></a></code></pre></div>
</div>
</div>
<div id="exercise-12.3.2" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.3.2</span></h3>
<div class="question">
<p>Why does this code fail?</p>
</div>
<div class="answer">
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb239-1" data-line-number="1">table4a <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb239-2" data-line-number="2"><span class="st">  </span><span class="kw">gather</span>(<span class="dv">1999</span>, <span class="dv">2000</span>, <span class="dt">key =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;cases&quot;</span>)</a>
<a class="sourceLine" id="cb239-3" data-line-number="3"><span class="co">#&gt; Error in inds_combine(.vars, ind_list): Position must be between 0 and n</span></a></code></pre></div>
<p>The code fails because the column names <code>1999</code> and <code>2000</code> are not standard and thus needs to be quoted.
The tidyverse functions will interpret <code>1999</code> and <code>2000</code> without quotes as looking for the 1999th and 2000th column of the data frame.
This will work:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb240-1" data-line-number="1">table4a <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb240-2" data-line-number="2"><span class="st">  </span><span class="kw">gather</span>(<span class="st">`</span><span class="dt">1999</span><span class="st">`</span>, <span class="st">`</span><span class="dt">2000</span><span class="st">`</span>, <span class="dt">key =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;cases&quot;</span>)</a>
<a class="sourceLine" id="cb240-3" data-line-number="3"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb240-4" data-line-number="4"><span class="co">#&gt;   country     year   cases</span></a>
<a class="sourceLine" id="cb240-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb240-6" data-line-number="6"><span class="co">#&gt; 1 Afghanistan 1999     745</span></a>
<a class="sourceLine" id="cb240-7" data-line-number="7"><span class="co">#&gt; 2 Brazil      1999   37737</span></a>
<a class="sourceLine" id="cb240-8" data-line-number="8"><span class="co">#&gt; 3 China       1999  212258</span></a>
<a class="sourceLine" id="cb240-9" data-line-number="9"><span class="co">#&gt; 4 Afghanistan 2000    2666</span></a>
<a class="sourceLine" id="cb240-10" data-line-number="10"><span class="co">#&gt; 5 Brazil      2000   80488</span></a>
<a class="sourceLine" id="cb240-11" data-line-number="11"><span class="co">#&gt; 6 China       2000  213766</span></a></code></pre></div>
</div>
</div>
<div id="exercise-12.3.3" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.3.3</span></h3>
<div class="question">
<p>Why does spreading this tibble fail? How could you add a new column to fix the problem?</p>
</div>
<div class="answer">
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb241-1" data-line-number="1">people &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb241-2" data-line-number="2">  <span class="op">~</span>name,             <span class="op">~</span>key,    <span class="op">~</span>value,</a>
<a class="sourceLine" id="cb241-3" data-line-number="3">  <span class="co">#-----------------|--------|------</span></a>
<a class="sourceLine" id="cb241-4" data-line-number="4">  <span class="st">&quot;Phillip Woods&quot;</span>,   <span class="st">&quot;age&quot;</span>,       <span class="dv">45</span>,</a>
<a class="sourceLine" id="cb241-5" data-line-number="5">  <span class="st">&quot;Phillip Woods&quot;</span>,   <span class="st">&quot;height&quot;</span>,   <span class="dv">186</span>,</a>
<a class="sourceLine" id="cb241-6" data-line-number="6">  <span class="st">&quot;Phillip Woods&quot;</span>,   <span class="st">&quot;age&quot;</span>,       <span class="dv">50</span>,</a>
<a class="sourceLine" id="cb241-7" data-line-number="7">  <span class="st">&quot;Jessica Cordero&quot;</span>, <span class="st">&quot;age&quot;</span>,       <span class="dv">37</span>,</a>
<a class="sourceLine" id="cb241-8" data-line-number="8">  <span class="st">&quot;Jessica Cordero&quot;</span>, <span class="st">&quot;height&quot;</span>,   <span class="dv">156</span></a>
<a class="sourceLine" id="cb241-9" data-line-number="9">)</a>
<a class="sourceLine" id="cb241-10" data-line-number="10"><span class="kw">glimpse</span>(people)</a>
<a class="sourceLine" id="cb241-11" data-line-number="11"><span class="co">#&gt; Observations: 5</span></a>
<a class="sourceLine" id="cb241-12" data-line-number="12"><span class="co">#&gt; Variables: 3</span></a>
<a class="sourceLine" id="cb241-13" data-line-number="13"><span class="co">#&gt; $ name  &lt;chr&gt; &quot;Phillip Woods&quot;, &quot;Phillip Woods&quot;, &quot;Phillip Woods&quot;, &quot;Jess...</span></a>
<a class="sourceLine" id="cb241-14" data-line-number="14"><span class="co">#&gt; $ key   &lt;chr&gt; &quot;age&quot;, &quot;height&quot;, &quot;age&quot;, &quot;age&quot;, &quot;height&quot;</span></a>
<a class="sourceLine" id="cb241-15" data-line-number="15"><span class="co">#&gt; $ value &lt;dbl&gt; 45, 186, 50, 37, 156</span></a></code></pre></div>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb242-1" data-line-number="1"><span class="kw">spread</span>(people, key, value)</a>
<a class="sourceLine" id="cb242-2" data-line-number="2"><span class="co">#&gt; Error: Duplicate identifiers for rows (1, 3)</span></a></code></pre></div>
<p>Spreading the data frame fails because there are two rows with “age” for “Phillip Woods”.
We would need to add another column with an indicator for the number observation it is,</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb243-1" data-line-number="1">people &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb243-2" data-line-number="2">  <span class="op">~</span>name,             <span class="op">~</span>key,    <span class="op">~</span>value, <span class="op">~</span>obs,</a>
<a class="sourceLine" id="cb243-3" data-line-number="3">  <span class="co">#-----------------|--------|------|------</span></a>
<a class="sourceLine" id="cb243-4" data-line-number="4">  <span class="st">&quot;Phillip Woods&quot;</span>,   <span class="st">&quot;age&quot;</span>,       <span class="dv">45</span>, <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb243-5" data-line-number="5">  <span class="st">&quot;Phillip Woods&quot;</span>,   <span class="st">&quot;height&quot;</span>,   <span class="dv">186</span>, <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb243-6" data-line-number="6">  <span class="st">&quot;Phillip Woods&quot;</span>,   <span class="st">&quot;age&quot;</span>,       <span class="dv">50</span>, <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb243-7" data-line-number="7">  <span class="st">&quot;Jessica Cordero&quot;</span>, <span class="st">&quot;age&quot;</span>,       <span class="dv">37</span>, <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb243-8" data-line-number="8">  <span class="st">&quot;Jessica Cordero&quot;</span>, <span class="st">&quot;height&quot;</span>,   <span class="dv">156</span>, <span class="dv">1</span></a>
<a class="sourceLine" id="cb243-9" data-line-number="9">)</a>
<a class="sourceLine" id="cb243-10" data-line-number="10"><span class="kw">spread</span>(people, key, value)</a>
<a class="sourceLine" id="cb243-11" data-line-number="11"><span class="co">#&gt; # A tibble: 3 x 4</span></a>
<a class="sourceLine" id="cb243-12" data-line-number="12"><span class="co">#&gt;   name              obs   age height</span></a>
<a class="sourceLine" id="cb243-13" data-line-number="13"><span class="co">#&gt;   &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb243-14" data-line-number="14"><span class="co">#&gt; 1 Jessica Cordero     1    37    156</span></a>
<a class="sourceLine" id="cb243-15" data-line-number="15"><span class="co">#&gt; 2 Phillip Woods       1    45    186</span></a>
<a class="sourceLine" id="cb243-16" data-line-number="16"><span class="co">#&gt; 3 Phillip Woods       2    50     NA</span></a></code></pre></div>
</div>
</div>
<div id="exercise-12.3.4" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.3.4</span></h3>
<div class="question">
<p>Tidy the simple tibble below. Do you need to spread or gather it? What are the variables?</p>
</div>
<div class="answer">
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb244-1" data-line-number="1">preg &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb244-2" data-line-number="2">  <span class="op">~</span>pregnant, <span class="op">~</span>male, <span class="op">~</span>female,</a>
<a class="sourceLine" id="cb244-3" data-line-number="3">  <span class="st">&quot;yes&quot;</span>,     <span class="ot">NA</span>,    <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb244-4" data-line-number="4">  <span class="st">&quot;no&quot;</span>,      <span class="dv">20</span>,    <span class="dv">12</span></a>
<a class="sourceLine" id="cb244-5" data-line-number="5">)</a></code></pre></div>
<p>You need to gather it. The variables are:</p>
<ul>
<li>pregnant: logical (“yes”, “no”)</li>
<li>female: logical</li>
<li>count: integer</li>
</ul>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb245-1" data-line-number="1"><span class="kw">gather</span>(preg, sex, count, male, female) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb245-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pregnant =</span> pregnant <span class="op">==</span><span class="st"> &quot;yes&quot;</span>,</a>
<a class="sourceLine" id="cb245-3" data-line-number="3">         <span class="dt">female =</span> sex <span class="op">==</span><span class="st"> &quot;female&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb245-4" data-line-number="4"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>sex)</a>
<a class="sourceLine" id="cb245-5" data-line-number="5"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb245-6" data-line-number="6"><span class="co">#&gt;   pregnant count female</span></a>
<a class="sourceLine" id="cb245-7" data-line-number="7"><span class="co">#&gt;   &lt;lgl&gt;    &lt;dbl&gt; &lt;lgl&gt; </span></a>
<a class="sourceLine" id="cb245-8" data-line-number="8"><span class="co">#&gt; 1 TRUE        NA FALSE </span></a>
<a class="sourceLine" id="cb245-9" data-line-number="9"><span class="co">#&gt; 2 FALSE       20 FALSE </span></a>
<a class="sourceLine" id="cb245-10" data-line-number="10"><span class="co">#&gt; 3 TRUE        10 TRUE  </span></a>
<a class="sourceLine" id="cb245-11" data-line-number="11"><span class="co">#&gt; 4 FALSE       12 TRUE</span></a></code></pre></div>
<p>Converting <code>pregnant</code> and <code>female</code> from character vectors to logical was not necessary to tidy it, but it makes it easier to work with.</p>
</div>
</div>
</div>
<div id="separating-and-uniting" class="section level2">
<h2><span class="header-section-number">12.4</span> Separating and Uniting</h2>
<div id="exercise-12.4.1" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.4.1</span></h3>
<div class="question">
<p>What do the extra and fill arguments do in <code>separate()</code>? Experiment with the various options for the following two toy datasets.</p>
</div>
<div class="answer">
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb246-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;a,b,c&quot;</span>, <span class="st">&quot;d,e,f,g&quot;</span>, <span class="st">&quot;h,i,j&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb246-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>))</a>
<a class="sourceLine" id="cb246-3" data-line-number="3"><span class="co">#&gt; Warning: Expected 3 pieces. Additional pieces discarded in 1 rows [2].</span></a>
<a class="sourceLine" id="cb246-4" data-line-number="4"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb246-5" data-line-number="5"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb246-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb246-7" data-line-number="7"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb246-8" data-line-number="8"><span class="co">#&gt; 2 d     e     f    </span></a>
<a class="sourceLine" id="cb246-9" data-line-number="9"><span class="co">#&gt; 3 h     i     j</span></a>
<a class="sourceLine" id="cb246-10" data-line-number="10"></a>
<a class="sourceLine" id="cb246-11" data-line-number="11"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;a,b,c&quot;</span>, <span class="st">&quot;d,e&quot;</span>, <span class="st">&quot;f,g,i&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb246-12" data-line-number="12"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>))</a>
<a class="sourceLine" id="cb246-13" data-line-number="13"><span class="co">#&gt; Warning: Expected 3 pieces. Missing pieces filled with `NA` in 1 rows [2].</span></a>
<a class="sourceLine" id="cb246-14" data-line-number="14"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb246-15" data-line-number="15"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb246-16" data-line-number="16"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb246-17" data-line-number="17"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb246-18" data-line-number="18"><span class="co">#&gt; 2 d     e     &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb246-19" data-line-number="19"><span class="co">#&gt; 3 f     g     i</span></a></code></pre></div>
<p>The <code>extra</code> argument tells <code>separate()</code> what to do if there are too many pieces,
and the <code>fill</code> argument if there aren’t enough.</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb247-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;a,b,c&quot;</span>, <span class="st">&quot;d,e,f,g&quot;</span>, <span class="st">&quot;h,i,j&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb247-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>))</a>
<a class="sourceLine" id="cb247-3" data-line-number="3"><span class="co">#&gt; Warning: Expected 3 pieces. Additional pieces discarded in 1 rows [2].</span></a>
<a class="sourceLine" id="cb247-4" data-line-number="4"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb247-5" data-line-number="5"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb247-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb247-7" data-line-number="7"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb247-8" data-line-number="8"><span class="co">#&gt; 2 d     e     f    </span></a>
<a class="sourceLine" id="cb247-9" data-line-number="9"><span class="co">#&gt; 3 h     i     j</span></a></code></pre></div>
<p>By default, <code>separate()</code> drops the extra values with a warning.</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb248-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;a,b,c&quot;</span>, <span class="st">&quot;d,e,f,g&quot;</span>, <span class="st">&quot;h,i,j&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb248-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>), <span class="dt">extra =</span> <span class="st">&quot;drop&quot;</span>)</a>
<a class="sourceLine" id="cb248-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb248-4" data-line-number="4"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb248-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb248-6" data-line-number="6"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb248-7" data-line-number="7"><span class="co">#&gt; 2 d     e     f    </span></a>
<a class="sourceLine" id="cb248-8" data-line-number="8"><span class="co">#&gt; 3 h     i     j</span></a></code></pre></div>
<p>This produces the same result as above, dropping extra values, but without the warning.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb249-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;a,b,c&quot;</span>, <span class="st">&quot;d,e,f,g&quot;</span>, <span class="st">&quot;h,i,j&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb249-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>), <span class="dt">extra =</span> <span class="st">&quot;merge&quot;</span>)</a>
<a class="sourceLine" id="cb249-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb249-4" data-line-number="4"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb249-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb249-6" data-line-number="6"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb249-7" data-line-number="7"><span class="co">#&gt; 2 d     e     f,g  </span></a>
<a class="sourceLine" id="cb249-8" data-line-number="8"><span class="co">#&gt; 3 h     i     j</span></a></code></pre></div>
<p>In this, the extra values are not split, so <code>&quot;f,g&quot;</code> appears in column three.</p>
<p>In this, one of the entries for column, <code>&quot;d,e&quot;</code>, has too few elements.
The default for <code>fill</code> is similar to those in separate <code>separate()</code>; it fills with missing values but emits a warning. In this, row 2 of column “three”, is <code>NA</code>.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb250-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;a,b,c&quot;</span>, <span class="st">&quot;d,e&quot;</span>, <span class="st">&quot;f,g,i&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb250-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>))</a>
<a class="sourceLine" id="cb250-3" data-line-number="3"><span class="co">#&gt; Warning: Expected 3 pieces. Missing pieces filled with `NA` in 1 rows [2].</span></a>
<a class="sourceLine" id="cb250-4" data-line-number="4"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb250-5" data-line-number="5"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb250-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb250-7" data-line-number="7"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb250-8" data-line-number="8"><span class="co">#&gt; 2 d     e     &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb250-9" data-line-number="9"><span class="co">#&gt; 3 f     g     i</span></a></code></pre></div>
<p>Alternative options for <code>fill</code> are <code>&quot;right&quot;</code>, to fill with missing values from the right, but without a warning</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb251-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;a,b,c&quot;</span>, <span class="st">&quot;d,e&quot;</span>, <span class="st">&quot;f,g,i&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb251-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>), <span class="dt">fill =</span> <span class="st">&quot;right&quot;</span>)</a>
<a class="sourceLine" id="cb251-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb251-4" data-line-number="4"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb251-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb251-6" data-line-number="6"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb251-7" data-line-number="7"><span class="co">#&gt; 2 d     e     &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb251-8" data-line-number="8"><span class="co">#&gt; 3 f     g     i</span></a></code></pre></div>
<p>The option <code>fill = &quot;left&quot;</code> also fills with missing values without a warning, but this time from the left side.
Now, column “one” of row 2 will be missing, and the other values in that row are shifted over.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb252-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;a,b,c&quot;</span>, <span class="st">&quot;d,e&quot;</span>, <span class="st">&quot;f,g,i&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb252-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>), <span class="dt">fill =</span> <span class="st">&quot;left&quot;</span>)</a>
<a class="sourceLine" id="cb252-3" data-line-number="3"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb252-4" data-line-number="4"><span class="co">#&gt;   one   two   three</span></a>
<a class="sourceLine" id="cb252-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb252-6" data-line-number="6"><span class="co">#&gt; 1 a     b     c    </span></a>
<a class="sourceLine" id="cb252-7" data-line-number="7"><span class="co">#&gt; 2 &lt;NA&gt;  d     e    </span></a>
<a class="sourceLine" id="cb252-8" data-line-number="8"><span class="co">#&gt; 3 f     g     i</span></a></code></pre></div>
</div>
</div>
<div id="exercise-12.4.2" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.4.2</span></h3>
<div class="question">
<p>Both <code>unite()</code> and <code>separate()</code> have a remove argument. What does it do? Why would you set it to <code>FALSE</code>?</p>
</div>
<div class="answer">
<p>You would set it to <code>FALSE</code> if you want to create a new variable, but keep the old one.</p>
</div>
</div>
<div id="exercise-12.4.3" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.4.3</span></h3>
<div class="question">
<p>Compare and contrast <code>separate()</code> and <code>extract()</code>, Why are there three variations of separation (by position, by separator, and with groups), but only one unite?</p>
</div>
<div class="answer">
<p>The function <code>separate()</code>, splits columns a column into multiple groups using
by separator, if the <code>sep</code> argument is a character vector, or character positions, if <code>sep</code> is numeric.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb253-1" data-line-number="1"><span class="co"># example with separators</span></a>
<a class="sourceLine" id="cb253-2" data-line-number="2"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;X_1&quot;</span>, <span class="st">&quot;X_2&quot;</span>, <span class="st">&quot;AA_1&quot;</span>, <span class="st">&quot;AA_2&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb253-3" data-line-number="3"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;into&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb253-4" data-line-number="4"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb253-5" data-line-number="5"><span class="co">#&gt;   variable into </span></a>
<a class="sourceLine" id="cb253-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb253-7" data-line-number="7"><span class="co">#&gt; 1 X        1    </span></a>
<a class="sourceLine" id="cb253-8" data-line-number="8"><span class="co">#&gt; 2 X        2    </span></a>
<a class="sourceLine" id="cb253-9" data-line-number="9"><span class="co">#&gt; 3 AA       1    </span></a>
<a class="sourceLine" id="cb253-10" data-line-number="10"><span class="co">#&gt; 4 AA       2</span></a>
<a class="sourceLine" id="cb253-11" data-line-number="11"></a>
<a class="sourceLine" id="cb253-12" data-line-number="12"><span class="co"># example with position</span></a>
<a class="sourceLine" id="cb253-13" data-line-number="13"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;X1&quot;</span>, <span class="st">&quot;X2&quot;</span>, <span class="st">&quot;Y1&quot;</span>, <span class="st">&quot;Y2&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb253-14" data-line-number="14"><span class="st">  </span><span class="kw">separate</span>(x, <span class="kw">c</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;into&quot;</span>), <span class="dt">sep =</span> <span class="kw">c</span>(<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb253-15" data-line-number="15"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb253-16" data-line-number="16"><span class="co">#&gt;   variable into </span></a>
<a class="sourceLine" id="cb253-17" data-line-number="17"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb253-18" data-line-number="18"><span class="co">#&gt; 1 X        1    </span></a>
<a class="sourceLine" id="cb253-19" data-line-number="19"><span class="co">#&gt; 2 X        2    </span></a>
<a class="sourceLine" id="cb253-20" data-line-number="20"><span class="co">#&gt; 3 Y        1    </span></a>
<a class="sourceLine" id="cb253-21" data-line-number="21"><span class="co">#&gt; 4 Y        2</span></a></code></pre></div>
<p>The function <code>extract()</code> uses a regular expression to specify groups in character vector and split that single character vector into multiple columns.
This is more flexible than <code>separate()</code> because it does not require a common
separator or specific column positions.</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb254-1" data-line-number="1"><span class="co"># example with separators</span></a>
<a class="sourceLine" id="cb254-2" data-line-number="2"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;X_1&quot;</span>, <span class="st">&quot;X_2&quot;</span>, <span class="st">&quot;AA_1&quot;</span>, <span class="st">&quot;AA_2&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb254-3" data-line-number="3"><span class="st">  </span><span class="kw">extract</span>(x, <span class="kw">c</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;id&quot;</span>), <span class="dt">regex =</span> <span class="st">&quot;([A-Z])_([0-9])&quot;</span>)</a>
<a class="sourceLine" id="cb254-4" data-line-number="4"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb254-5" data-line-number="5"><span class="co">#&gt;   variable id   </span></a>
<a class="sourceLine" id="cb254-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb254-7" data-line-number="7"><span class="co">#&gt; 1 X        1    </span></a>
<a class="sourceLine" id="cb254-8" data-line-number="8"><span class="co">#&gt; 2 X        2    </span></a>
<a class="sourceLine" id="cb254-9" data-line-number="9"><span class="co">#&gt; 3 A        1    </span></a>
<a class="sourceLine" id="cb254-10" data-line-number="10"><span class="co">#&gt; 4 A        2</span></a>
<a class="sourceLine" id="cb254-11" data-line-number="11"></a>
<a class="sourceLine" id="cb254-12" data-line-number="12"><span class="co"># example with position</span></a>
<a class="sourceLine" id="cb254-13" data-line-number="13"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;X1&quot;</span>, <span class="st">&quot;X2&quot;</span>, <span class="st">&quot;Y1&quot;</span>, <span class="st">&quot;Y2&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb254-14" data-line-number="14"><span class="st">  </span><span class="kw">extract</span>(x, <span class="kw">c</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;id&quot;</span>), <span class="dt">regex =</span> <span class="st">&quot;([A-Z])([0-9])&quot;</span>)</a>
<a class="sourceLine" id="cb254-15" data-line-number="15"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb254-16" data-line-number="16"><span class="co">#&gt;   variable id   </span></a>
<a class="sourceLine" id="cb254-17" data-line-number="17"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb254-18" data-line-number="18"><span class="co">#&gt; 1 X        1    </span></a>
<a class="sourceLine" id="cb254-19" data-line-number="19"><span class="co">#&gt; 2 X        2    </span></a>
<a class="sourceLine" id="cb254-20" data-line-number="20"><span class="co">#&gt; 3 Y        1    </span></a>
<a class="sourceLine" id="cb254-21" data-line-number="21"><span class="co">#&gt; 4 Y        2</span></a>
<a class="sourceLine" id="cb254-22" data-line-number="22"></a>
<a class="sourceLine" id="cb254-23" data-line-number="23"><span class="co"># example that separate could not parse</span></a>
<a class="sourceLine" id="cb254-24" data-line-number="24"><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;X1&quot;</span>, <span class="st">&quot;X20&quot;</span>, <span class="st">&quot;AA11&quot;</span>, <span class="st">&quot;AA2&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb254-25" data-line-number="25"><span class="st">  </span><span class="kw">extract</span>(x, <span class="kw">c</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;id&quot;</span>), <span class="dt">regex =</span> <span class="st">&quot;([A-Z]+)([0-9]+)&quot;</span>)  </a>
<a class="sourceLine" id="cb254-26" data-line-number="26"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb254-27" data-line-number="27"><span class="co">#&gt;   variable id   </span></a>
<a class="sourceLine" id="cb254-28" data-line-number="28"><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb254-29" data-line-number="29"><span class="co">#&gt; 1 X        1    </span></a>
<a class="sourceLine" id="cb254-30" data-line-number="30"><span class="co">#&gt; 2 X        20   </span></a>
<a class="sourceLine" id="cb254-31" data-line-number="31"><span class="co">#&gt; 3 AA       11   </span></a>
<a class="sourceLine" id="cb254-32" data-line-number="32"><span class="co">#&gt; 4 AA       2</span></a></code></pre></div>
<p>Both <code>separate()</code> and <code>extract()</code> convert a single column to many columns.
However, <code>unite()</code> converts many columns to one, with a choice of a separator to include between column values.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb255-1" data-line-number="1"><span class="kw">tibble</span>(<span class="dt">variable =</span> <span class="kw">c</span>(<span class="st">&quot;X&quot;</span>, <span class="st">&quot;X&quot;</span>, <span class="st">&quot;Y&quot;</span>, <span class="st">&quot;Y&quot;</span>), <span class="dt">id =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb255-2" data-line-number="2"><span class="st">  </span><span class="kw">unite</span>(x, variable, id, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb255-3" data-line-number="3"><span class="co">#&gt; # A tibble: 4 x 1</span></a>
<a class="sourceLine" id="cb255-4" data-line-number="4"><span class="co">#&gt;   x    </span></a>
<a class="sourceLine" id="cb255-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb255-6" data-line-number="6"><span class="co">#&gt; 1 X_1  </span></a>
<a class="sourceLine" id="cb255-7" data-line-number="7"><span class="co">#&gt; 2 X_2  </span></a>
<a class="sourceLine" id="cb255-8" data-line-number="8"><span class="co">#&gt; 3 Y_1  </span></a>
<a class="sourceLine" id="cb255-9" data-line-number="9"><span class="co">#&gt; 4 Y_2</span></a></code></pre></div>
<p>In other words, with <code>extract()</code> and <code>separate()</code> only one column can be chosen,
but there are many choices how to split that single column into different columns.
With <code>unite()</code>, there are many choices as to which columns to include, but only
choice as to how to combine their contents into a single vector.</p>
</div>
</div>
</div>
<div id="missing-values-1" class="section level2">
<h2><span class="header-section-number">12.5</span> Missing Values</h2>
<div id="exercise-12.5.1" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.5.1</span></h3>
<div class="question">
<p>Compare and contrast the <code>fill</code> arguments to <code>spread()</code> and <code>complete()</code>.</p>
</div>
<div class="answer">
<p>In <code>spread()</code>, the fill argument explicitly sets the value to replace <code>NA</code>s.
In <code>complete()</code>, the fill argument also sets a value to replace <code>NA</code>s but it is named list, allowing for different values for different variables.
Also, both cases replace both implicit and explicit missing values.</p>
</div>
</div>
<div id="exercise-12.5.2" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.5.2</span></h3>
<div class="question">
<p>What does the direction argument to <code>fill()</code> do?</p>
</div>
<div class="answer">
<p>With <code>fill</code>, it determines whether <code>NA</code> values should be replaced by the previous non-missing value (<code>&quot;down&quot;</code>) or the next non-missing value (<code>&quot;up&quot;</code>).</p>
</div>
</div>
</div>
<div id="case-study" class="section level2">
<h2><span class="header-section-number">12.6</span> Case Study</h2>
<p>This code is repeated from the chapter because it is needed by the exercises.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb256-1" data-line-number="1">who1 &lt;-<span class="st"> </span>who <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb256-2" data-line-number="2"><span class="st">  </span><span class="kw">gather</span>(new_sp_m014<span class="op">:</span>newrel_f65, <span class="dt">key =</span> <span class="st">&quot;key&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;cases&quot;</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb256-3" data-line-number="3"><span class="kw">glimpse</span>(who1)</a>
<a class="sourceLine" id="cb256-4" data-line-number="4"><span class="co">#&gt; Observations: 76,046</span></a>
<a class="sourceLine" id="cb256-5" data-line-number="5"><span class="co">#&gt; Variables: 6</span></a>
<a class="sourceLine" id="cb256-6" data-line-number="6"><span class="co">#&gt; $ country &lt;chr&gt; &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afghanis...</span></a>
<a class="sourceLine" id="cb256-7" data-line-number="7"><span class="co">#&gt; $ iso2    &lt;chr&gt; &quot;AF&quot;, &quot;AF&quot;, &quot;AF&quot;, &quot;AF&quot;, &quot;AF&quot;, &quot;AF&quot;, &quot;AF&quot;, &quot;AF&quot;, &quot;AF&quot;, ...</span></a>
<a class="sourceLine" id="cb256-8" data-line-number="8"><span class="co">#&gt; $ iso3    &lt;chr&gt; &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;...</span></a>
<a class="sourceLine" id="cb256-9" data-line-number="9"><span class="co">#&gt; $ year    &lt;int&gt; 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, ...</span></a>
<a class="sourceLine" id="cb256-10" data-line-number="10"><span class="co">#&gt; $ key     &lt;chr&gt; &quot;new_sp_m014&quot;, &quot;new_sp_m014&quot;, &quot;new_sp_m014&quot;, &quot;new_sp_m...</span></a>
<a class="sourceLine" id="cb256-11" data-line-number="11"><span class="co">#&gt; $ cases   &lt;int&gt; 0, 30, 8, 52, 129, 90, 127, 139, 151, 193, 186, 187, 2...</span></a></code></pre></div>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb257-1" data-line-number="1">who2 &lt;-<span class="st"> </span>who1 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb257-2" data-line-number="2"><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">key =</span> stringr<span class="op">::</span><span class="kw">str_replace</span>(key, <span class="st">&quot;newrel&quot;</span>, <span class="st">&quot;new_rel&quot;</span>))</a></code></pre></div>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb258-1" data-line-number="1">who3 &lt;-<span class="st"> </span>who2 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb258-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(key, <span class="kw">c</span>(<span class="st">&quot;new&quot;</span>, <span class="st">&quot;type&quot;</span>, <span class="st">&quot;sexage&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb258-3" data-line-number="3">who3</a>
<a class="sourceLine" id="cb258-4" data-line-number="4"><span class="co">#&gt; # A tibble: 76,046 x 8</span></a>
<a class="sourceLine" id="cb258-5" data-line-number="5"><span class="co">#&gt;   country     iso2  iso3   year new   type  sexage cases</span></a>
<a class="sourceLine" id="cb258-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb258-7" data-line-number="7"><span class="co">#&gt; 1 Afghanistan AF    AFG    1997 new   sp    m014       0</span></a>
<a class="sourceLine" id="cb258-8" data-line-number="8"><span class="co">#&gt; 2 Afghanistan AF    AFG    1998 new   sp    m014      30</span></a>
<a class="sourceLine" id="cb258-9" data-line-number="9"><span class="co">#&gt; 3 Afghanistan AF    AFG    1999 new   sp    m014       8</span></a>
<a class="sourceLine" id="cb258-10" data-line-number="10"><span class="co">#&gt; 4 Afghanistan AF    AFG    2000 new   sp    m014      52</span></a>
<a class="sourceLine" id="cb258-11" data-line-number="11"><span class="co">#&gt; 5 Afghanistan AF    AFG    2001 new   sp    m014     129</span></a>
<a class="sourceLine" id="cb258-12" data-line-number="12"><span class="co">#&gt; 6 Afghanistan AF    AFG    2002 new   sp    m014      90</span></a>
<a class="sourceLine" id="cb258-13" data-line-number="13"><span class="co">#&gt; # ... with 7.604e+04 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb259-1" data-line-number="1">who3 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb259-2" data-line-number="2"><span class="st">  </span><span class="kw">count</span>(new)</a>
<a class="sourceLine" id="cb259-3" data-line-number="3"><span class="co">#&gt; # A tibble: 1 x 2</span></a>
<a class="sourceLine" id="cb259-4" data-line-number="4"><span class="co">#&gt;   new       n</span></a>
<a class="sourceLine" id="cb259-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb259-6" data-line-number="6"><span class="co">#&gt; 1 new   76046</span></a></code></pre></div>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb260-1" data-line-number="1">who4 &lt;-<span class="st"> </span>who3 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb260-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>new, <span class="op">-</span>iso2, <span class="op">-</span>iso3)</a></code></pre></div>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb261-1" data-line-number="1">who5 &lt;-<span class="st"> </span>who4 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb261-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(sexage, <span class="kw">c</span>(<span class="st">&quot;sex&quot;</span>, <span class="st">&quot;age&quot;</span>), <span class="dt">sep =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb261-3" data-line-number="3">who5</a>
<a class="sourceLine" id="cb261-4" data-line-number="4"><span class="co">#&gt; # A tibble: 76,046 x 6</span></a>
<a class="sourceLine" id="cb261-5" data-line-number="5"><span class="co">#&gt;   country      year type  sex   age   cases</span></a>
<a class="sourceLine" id="cb261-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb261-7" data-line-number="7"><span class="co">#&gt; 1 Afghanistan  1997 sp    m     014       0</span></a>
<a class="sourceLine" id="cb261-8" data-line-number="8"><span class="co">#&gt; 2 Afghanistan  1998 sp    m     014      30</span></a>
<a class="sourceLine" id="cb261-9" data-line-number="9"><span class="co">#&gt; 3 Afghanistan  1999 sp    m     014       8</span></a>
<a class="sourceLine" id="cb261-10" data-line-number="10"><span class="co">#&gt; 4 Afghanistan  2000 sp    m     014      52</span></a>
<a class="sourceLine" id="cb261-11" data-line-number="11"><span class="co">#&gt; 5 Afghanistan  2001 sp    m     014     129</span></a>
<a class="sourceLine" id="cb261-12" data-line-number="12"><span class="co">#&gt; 6 Afghanistan  2002 sp    m     014      90</span></a>
<a class="sourceLine" id="cb261-13" data-line-number="13"><span class="co">#&gt; # ... with 7.604e+04 more rows</span></a></code></pre></div>
<div id="exercise-12.6.1" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.6.1</span></h3>
<div class="question">
<p>In this case study I set <code>na.rm = TRUE</code> just to make it easier to check that we had the correct values. Is this reasonable? Think about how missing values are represented in this dataset. Are there implicit missing values? What’s the difference between an <code>NA</code> and zero?</p>
</div>
<div class="answer">
<p>Perhaps? I would need to know more about the data generation process.
There are zero’s in the data, which means they may explicitly be indicating no cases.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb262-1" data-line-number="1">who1 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb262-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(cases <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb262-3" data-line-number="3"><span class="st">  </span><span class="kw">nrow</span>()</a>
<a class="sourceLine" id="cb262-4" data-line-number="4"><span class="co">#&gt; [1] 11080</span></a></code></pre></div>
<p>So it appears that either a country has all its values in a year as non-missing if the WHO collected data for that country, or all its values are non-missing.
So it is okay to treat explicitly and implicitly missing values the same, and we don’t lose any information by dropping them.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb263-1" data-line-number="1"><span class="kw">gather</span>(who, new_sp_m014<span class="op">:</span>newrel_f65, <span class="dt">key =</span> <span class="st">&quot;key&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;cases&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb263-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(country, year)  <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb263-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">missing =</span> <span class="kw">is.na</span>(cases)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb263-4" data-line-number="4"><span class="st">  </span><span class="kw">select</span>(country, year, missing) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb263-5" data-line-number="5"><span class="st">  </span><span class="kw">distinct</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb263-6" data-line-number="6"><span class="st">  </span><span class="kw">group_by</span>(country, year) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb263-7" data-line-number="7"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">n</span>() <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb263-8" data-line-number="8"><span class="co">#&gt; # A tibble: 6,968 x 3</span></a>
<a class="sourceLine" id="cb263-9" data-line-number="9"><span class="co">#&gt; # Groups:   country, year [3,484]</span></a>
<a class="sourceLine" id="cb263-10" data-line-number="10"><span class="co">#&gt;   country      year missing</span></a>
<a class="sourceLine" id="cb263-11" data-line-number="11"><span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt; &lt;lgl&gt;  </span></a>
<a class="sourceLine" id="cb263-12" data-line-number="12"><span class="co">#&gt; 1 Afghanistan  1997 FALSE  </span></a>
<a class="sourceLine" id="cb263-13" data-line-number="13"><span class="co">#&gt; 2 Afghanistan  1998 FALSE  </span></a>
<a class="sourceLine" id="cb263-14" data-line-number="14"><span class="co">#&gt; 3 Afghanistan  1999 FALSE  </span></a>
<a class="sourceLine" id="cb263-15" data-line-number="15"><span class="co">#&gt; 4 Afghanistan  2000 FALSE  </span></a>
<a class="sourceLine" id="cb263-16" data-line-number="16"><span class="co">#&gt; 5 Afghanistan  2001 FALSE  </span></a>
<a class="sourceLine" id="cb263-17" data-line-number="17"><span class="co">#&gt; 6 Afghanistan  2002 FALSE  </span></a>
<a class="sourceLine" id="cb263-18" data-line-number="18"><span class="co">#&gt; # ... with 6,962 more rows</span></a></code></pre></div>
</div>
</div>
<div id="exercise-12.6.2" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.6.2</span></h3>
<div class="question">
<p>What happens if you neglect the <code>mutate()</code> step? (<code>mutate(key = stringr::str_replace(key, &quot;newrel&quot;, &quot;new_rel&quot;)</code>)</p>
</div>
<div class="answer">
<p>The <code>separate()</code> function emits the warning “too few values”.
If we check the rows for keys beginning with <code>&quot;newrel_&quot;</code>, we see that <code>sexage</code> is messing,
and <code>type = m014</code>.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb264-1" data-line-number="1">who3a &lt;-<span class="st"> </span>who1 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb264-2" data-line-number="2"><span class="st">  </span><span class="kw">separate</span>(key, <span class="kw">c</span>(<span class="st">&quot;new&quot;</span>, <span class="st">&quot;type&quot;</span>, <span class="st">&quot;sexage&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb264-3" data-line-number="3"><span class="co">#&gt; Warning: Expected 3 pieces. Missing pieces filled with `NA` in 2580 rows</span></a>
<a class="sourceLine" id="cb264-4" data-line-number="4"><span class="co">#&gt; [73467, 73468, 73469, 73470, 73471, 73472, 73473, 73474, 73475, 73476,</span></a>
<a class="sourceLine" id="cb264-5" data-line-number="5"><span class="co">#&gt; 73477, 73478, 73479, 73480, 73481, 73482, 73483, 73484, 73485, 73486, ...].</span></a>
<a class="sourceLine" id="cb264-6" data-line-number="6"></a>
<a class="sourceLine" id="cb264-7" data-line-number="7"><span class="kw">filter</span>(who3a, new <span class="op">==</span><span class="st"> &quot;newrel&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</a>
<a class="sourceLine" id="cb264-8" data-line-number="8"><span class="co">#&gt; # A tibble: 6 x 8</span></a>
<a class="sourceLine" id="cb264-9" data-line-number="9"><span class="co">#&gt;   country     iso2  iso3   year new    type  sexage cases</span></a>
<a class="sourceLine" id="cb264-10" data-line-number="10"><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb264-11" data-line-number="11"><span class="co">#&gt; 1 Afghanistan AF    AFG    2013 newrel m014  &lt;NA&gt;    1705</span></a>
<a class="sourceLine" id="cb264-12" data-line-number="12"><span class="co">#&gt; 2 Albania     AL    ALB    2013 newrel m014  &lt;NA&gt;      14</span></a>
<a class="sourceLine" id="cb264-13" data-line-number="13"><span class="co">#&gt; 3 Algeria     DZ    DZA    2013 newrel m014  &lt;NA&gt;      25</span></a>
<a class="sourceLine" id="cb264-14" data-line-number="14"><span class="co">#&gt; 4 Andorra     AD    AND    2013 newrel m014  &lt;NA&gt;       0</span></a>
<a class="sourceLine" id="cb264-15" data-line-number="15"><span class="co">#&gt; 5 Angola      AO    AGO    2013 newrel m014  &lt;NA&gt;     486</span></a>
<a class="sourceLine" id="cb264-16" data-line-number="16"><span class="co">#&gt; 6 Anguilla    AI    AIA    2013 newrel m014  &lt;NA&gt;       0</span></a></code></pre></div>
</div>
</div>
<div id="exercise-12.6.3" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.6.3</span></h3>
<div class="question">
<p>I claimed that <code>iso2</code> and <code>iso3</code> were redundant with country. Confirm this claim.</p>
</div>
<div class="answer">
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb265-1" data-line-number="1"><span class="kw">select</span>(who3, country, iso2, iso3) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb265-2" data-line-number="2"><span class="st">  </span><span class="kw">distinct</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb265-3" data-line-number="3"><span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb265-4" data-line-number="4"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">n</span>() <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb265-5" data-line-number="5"><span class="co">#&gt; # A tibble: 0 x 3</span></a>
<a class="sourceLine" id="cb265-6" data-line-number="6"><span class="co">#&gt; # Groups:   country [0]</span></a>
<a class="sourceLine" id="cb265-7" data-line-number="7"><span class="co">#&gt; # ... with 3 variables: country &lt;chr&gt;, iso2 &lt;chr&gt;, iso3 &lt;chr&gt;</span></a></code></pre></div>
</div>
</div>
<div id="exercise-12.6.4" class="section level3 unnumbered exercise">
<h3>Exercise <span class="exercise-number">12.6.4</span></h3>
<div class="question">
<p>For each country, year, and sex compute the total number of cases of TB. Make an informative visualization of the data.</p>
</div>
<div class="answer">
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb266-1" data-line-number="1">who5 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb266-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(country, year, sex) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb266-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1995</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb266-4" data-line-number="4"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cases =</span> <span class="kw">sum</span>(cases)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb266-5" data-line-number="5"><span class="st">  </span><span class="kw">unite</span>(country_sex, country, sex, <span class="dt">remove =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb266-6" data-line-number="6"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> cases, <span class="dt">group =</span> country_sex, <span class="dt">colour =</span> sex)) <span class="op">+</span></a>
<a class="sourceLine" id="cb266-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="tidy_files/figure-html/unnamed-chunk-44-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>A small multiples plot faceting by country is difficult given the number of countries.
Focusing on those countries with the largest changes or absolute magnitudes after providing the context above is another option.</p>
</div>
</div>
</div>
<div id="non-tidy-data" class="section level2">
<h2><span class="header-section-number">12.7</span> Non-Tidy Data</h2>
<p>No exercises</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-import.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="relational-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jrnold/r4ds-exercise-solutions/edit/master/tidy.Rmd",
"text": "Edit"
},
"download": ["r4ds-solutions.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
